<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/08/08/Prometheus-alertmanager/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/08/Prometheus-alertmanager/" class="post-title-link" itemprop="url">Prometheus alertmanager</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-08 16:38:21" itemprop="dateCreated datePublished" datetime="2019-08-08T16:38:21+08:00">2019-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-22 16:16:36" itemprop="dateModified" datetime="2020-03-22T16:16:36+08:00">2020-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近在研究Ceph的监控系统，Ceph 14.2.1的MGR中已经有Prometheus Plugin，可以替代原来的<a target="_blank" rel="noopener" href="https://github.com/digitalocean/ceph_exporter">ceph_exporter</a>项目，作为新的exporter。MGR中的Prometheus Plugin可以对Ceph的一些状态进行监控（大概390+个监控指标），基本涵盖了能想到的还有想不到的监控指标，打开了认识Ceph的另一个窗口。enable起这个Plugin并不是难点，难点在怎样从中捞取有价值的数据，这是需要长期积累持续挖掘的问题，你懂得。。。。。。说了一堆XXX，这里只做一个prometheus与alertmanager集成的入门实验。</p>
<p>prometheus与alertmanager是相互独立的组件，我们先来说一下它们的职责：</p>
<ul>
<li><p>prometheus端负责产生告警，并发送到alertmanager端</p>
<p>需要配置alertmanager服务在哪、告警产生的条件（alert rule）</p>
</li>
<li><p>alertmanager端负责接收prometheus发来的告警，然后做一些后续处理（比如把告警信息发出到email、微信、钉钉……）</p>
<p>需要配置route、receivers</p>
</li>
</ul>
<p><img src="https://github.com/prometheus/alertmanager/raw/master/doc/arch.svg?sanitize=true"></p>
<p>假设有这样一个场景：Prometheus已经收集到了Ceph的监控指标，如果集群中有OSD down超过1小时，那么我们需要发送邮件给相关人员，告知需要处理。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/07/20/Ansible%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97%E4%B8%8E%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/20/Ansible%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97%E4%B8%8E%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">Ansible常用模块与操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-20 12:50:26" itemprop="dateCreated datePublished" datetime="2019-07-20T12:50:26+08:00">2019-07-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-22 16:16:35" itemprop="dateModified" datetime="2020-03-22T16:16:35+08:00">2020-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ansible"><a href="#ansible" class="headerlink" title="ansible"></a>ansible</h1><h2 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h2><h3 id="如何查看模块帮助"><a href="#如何查看模块帮助" class="headerlink" title="如何查看模块帮助"></a>如何查看模块帮助</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">列出所有模块</span><br><span class="line">ansible-doc -l</span><br><span class="line"></span><br><span class="line">查看指定模块帮助</span><br><span class="line">ansible-doc -s MODULE_NAME</span><br></pre></td></tr></table></figure>
<h3 id="ansible命令应用基础"><a href="#ansible命令应用基础" class="headerlink" title="ansible命令应用基础"></a>ansible命令应用基础</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">语法（新版）</span><br><span class="line">ansible &lt;host-pattern&gt; [options]</span><br><span class="line"></span><br><span class="line">语法（旧版）</span><br><span class="line">ansible &lt;host-pattern&gt; [-f forks] [-m module_name] [-a args]</span><br><span class="line">	-f forks：启动的并发线程数</span><br><span class="line">	-m module_name：要使用的模块</span><br><span class="line">	-a args：模块特有的参数</span><br></pre></td></tr></table></figure>
<h3 id="常见模块"><a href="#常见模块" class="headerlink" title="常见模块"></a>常见模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">command：命令模块，默认模块，用于在远程执行命令</span><br><span class="line">	例如：</span><br><span class="line">	ansible all -a &#39;date&#39;</span><br><span class="line">	ansible all -m command -a &#39;date&#39;</span><br><span class="line"></span><br><span class="line">cron：</span><br><span class="line">	state：</span><br><span class="line">		present：安装</span><br><span class="line">		absent：移除</span><br><span class="line">	例如：</span><br><span class="line">	ansible webserver -m cron -a &#39;minute&#x3D;&quot;*&#x2F;10&quot; job&#x3D;&quot;&#x2F;bin&#x2F;echo hello&quot; name&#x3D;&quot;test cron job&quot;&#39;</span><br><span class="line">	ansible webserver -a &#39;crontab -l&#39;</span><br><span class="line">	ansible webserver -m cron -a &#39;minute&#x3D;&quot;*&#x2F;10&quot; job&#x3D;&quot;&#x2F;bin&#x2F;echo hello&quot; name&#x3D;&quot;test cron job&quot; state&#x3D;absent&#39;</span><br><span class="line"></span><br><span class="line">user：</span><br><span class="line">	name&#x3D;：指明创建的用户的名字</span><br><span class="line">	例如：</span><br><span class="line">	ansible all -m user -a &#39;name&#x3D;&quot;user1&quot;&#39;</span><br><span class="line">	ansible all -m user -a &#39;name&#x3D;&quot;user1&quot; state&#x3D;absent&#39;</span><br><span class="line"></span><br><span class="line">group：</span><br><span class="line">	例如：</span><br><span class="line">	ansible webserver -m group -a &#39;name&#x3D;mysql gid&#x3D;306 system&#x3D;yes&#39;</span><br><span class="line">	ansible webserver -m user -a &#39;name&#x3D;mysql uid&#x3D;306 system&#x3D;yes group&#x3D;mysql&#39;</span><br><span class="line">	</span><br><span class="line">copy：</span><br><span class="line">	src&#x3D;：定义本地源文件路径</span><br><span class="line">	dest&#x3D;：定义远程目标文件路径</span><br><span class="line">	content&#x3D;：取代src&#x3D;，表示直接用此处指定的信息生成为目标文件内容</span><br><span class="line">	例如:</span><br><span class="line">	ansible all -m copy -a &#39;src&#x3D;&#x2F;etc&#x2F;fstab dest&#x3D;&#x2F;tmp&#x2F;fstab.ansible owner&#x3D;root mode&#x3D;640&#39;</span><br><span class="line">	ansible all -m copy -a &#39;content&#x3D;&quot;Hello Ansible\nHi MageEdu&quot; dest&#x3D;&#x2F;tmp&#x2F;test.ansible&#39;</span><br><span class="line"></span><br><span class="line">file：设定文件属性</span><br><span class="line">	path&#x3D;：指定文件路径，可以使用name或dest来替换</span><br><span class="line">	创建文件的符号链接：</span><br><span class="line">		src&#x3D;：指明源文件</span><br><span class="line">		path&#x3D;：指明符号链接文件路径</span><br><span class="line">	例如：</span><br><span class="line">	ansible all -m file -a &#39;owner&#x3D;mysql group&#x3D;mysql mode&#x3D;644 path&#x3D;&#x2F;tmp&#x2F;fstab.ansible&#39;</span><br><span class="line">	ansible all -m file -a &#39;path&#x3D;&#x2F;tmp&#x2F;fstab.link src&#x3D;&#x2F;tmp&#x2F;fstab.ansible state&#x3D;link&#39;</span><br><span class="line"></span><br><span class="line">ping：测试指定主机是否能连接</span><br><span class="line">	例如：</span><br><span class="line">	ansible all -m ping</span><br><span class="line"></span><br><span class="line">service：指定服务运行状态</span><br><span class="line">	enabled&#x3D;：是否开机自动启动，取值为true或者false</span><br><span class="line">	name&#x3D;：服务名称</span><br><span class="line">	state&#x3D;：状态，取值有started，stopped，restarted</span><br><span class="line">	例如：</span><br><span class="line">	ansible webserver -a &#39;service httpd status&#39;</span><br><span class="line">	ansible webserver -a &#39;chkconfig --list httpd&#39;</span><br><span class="line">	ansible webserver -m service -a &#39;enabled&#x3D;true name&#x3D;httpd state&#x3D;started&#39;</span><br><span class="line">	</span><br><span class="line">shell：在远程主机上运行命令，尤其是用到管道等功能的复杂命令</span><br><span class="line">	例如：</span><br><span class="line">	ansible all -m user -a &#39;name&#x3D;user1&#39;</span><br><span class="line">	ansible all -m command -a &#39;echo mageedu | passwd --stdin user1&#39; （command模块|管道符无法送过去）</span><br><span class="line">	ansible all -m shell -a &#39;echo mageedu | passwd --stdin user1&#39; （有管道或变量最好使用shell模块）</span><br><span class="line"></span><br><span class="line">script：将本地脚本复制到远程主机并运行</span><br><span class="line">	注意：要使用相对路径指定脚本</span><br><span class="line">	例如：</span><br><span class="line">	ansible all -m script -a &quot;test.sh&quot;</span><br><span class="line"></span><br><span class="line">yum：安装程序包</span><br><span class="line">	name&#x3D;：指明要安装的程序包，可以带上版本号</span><br><span class="line">	state&#x3D;：present，latest表示安装，absent表示卸载</span><br><span class="line">	例如：</span><br><span class="line">	ansible all -m yum -a &quot;name&#x3D;vim&quot;</span><br><span class="line"></span><br><span class="line">setup：收集远程主机的facts</span><br><span class="line">	每个被管理节点在接收并运行管理命令之前，会将自己主机相关信息，如操作系统版本、IP地址等报告给远程的ansible主机</span><br><span class="line">	ansible all -m setup</span><br></pre></td></tr></table></figure>
<h1 id="ansible-playbook预备知识"><a href="#ansible-playbook预备知识" class="headerlink" title="ansible-playbook预备知识"></a>ansible-playbook预备知识</h1><h2 id="YMAL语法"><a href="#YMAL语法" class="headerlink" title="YMAL语法"></a>YMAL语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">YAML的语法和其他高阶语言类似，并且可以简单表达清单、散列表、标量等数据结构。其结构（Structure）通过空格来展示，序列（Sequence）里的项用&quot;-&quot;来代表，Map里的键值对用&quot;:&quot;分隔。下面是一个示例。</span><br><span class="line">name: John Smith</span><br><span class="line">age: 41</span><br><span class="line">gender: Male</span><br><span class="line">spouse:</span><br><span class="line">    name: Jane Smith</span><br><span class="line">    age: 37</span><br><span class="line">    gender: Female</span><br><span class="line">children:</span><br><span class="line">    - name: Jimmy Smith</span><br><span class="line">      age: 17</span><br><span class="line">      gender: Male</span><br><span class="line">    - name: Jenny Smith</span><br><span class="line">      age: 13</span><br><span class="line">      gender: Female</span><br></pre></td></tr></table></figure>
<h3 id="YMAL常见的数据类型"><a href="#YMAL常见的数据类型" class="headerlink" title="YMAL常见的数据类型"></a>YMAL常见的数据类型</h3><p><code>list</code> 列表的所有元素均使用”-“开头，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># A list of stasty fruits</span><br><span class="line">- Apple</span><br><span class="line">- Orange</span><br><span class="line">- Strawberry</span><br><span class="line">- Mango</span><br></pre></td></tr></table></figure>
<p><code>dictionary</code> 字典通过key与value进行标识，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># An employee record</span><br><span class="line">name: Example Developer</span><br><span class="line">job: Developer</span><br><span class="line">skill: Elite</span><br><span class="line"></span><br><span class="line">也可以将key: value放置于&#123;&#125;中进行表示，例如：</span><br><span class="line">---</span><br><span class="line"># An employee record</span><br><span class="line">&#123;name: Example Developer, job: Developer, skill: Elite&#125;</span><br></pre></td></tr></table></figure>
<h2 id="基础元素"><a href="#基础元素" class="headerlink" title="基础元素"></a>基础元素</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><ul>
<li>变量命名</li>
</ul>
<p>变量名仅能由字母、数字和下划线组成，且只能以字母开头。</p>
<ul>
<li>facts</li>
</ul>
<p>facts是由正在通信的远程目标主机发回的信息，这些信息被保存在ansible变量中，要获取指定的远程主机所支持的所有facts，可以使用命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible hostname -m setup</span><br></pre></td></tr></table></figure>
<ul>
<li>register</li>
</ul>
<p>把任务的输出定义为变量，然后用于其他任务，示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tasks:</span><br><span class="line">    - shell: &#x2F;usr&#x2F;bin&#x2F;foo</span><br><span class="line">      register: foo_result</span><br><span class="line">      ignore_errors: True</span><br></pre></td></tr></table></figure>
<ul>
<li>通过命令行传递变量</li>
</ul>
<p>在运行playbook的时候也可以传递一些变量供playbook使用，示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook test.yml --extra-vars &quot;hosts&#x3D;www user&#x3D;mageedu&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>通过roles传递变量</li>
</ul>
<p>当给一个主机应用角色的时候可以传递变量，然后在角色内使用这些变量，示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- hosts: webservers</span><br><span class="line">  roles:</span><br><span class="line">    - common</span><br><span class="line">    - &#123; role: foo_app_instance, dir: &#39;&#x2F;web&#x2F;htdocs&#x2F;a.com&#39;, port: 8080 &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Inventory"><a href="#Inventory" class="headerlink" title="Inventory"></a>Inventory</h3><p>ansible主要用在批量主机操作，为了便携的使用其中的部分主机，可以在inventory file中将其分组命名。默认的inventory file为/etc/ansible/hosts。</p>
<p>inventory file可以有多个，且也可以通过Dynamic Inventory来动态生成。</p>
<ul>
<li>inventory文件格式</li>
</ul>
<p>inventory文件遵循INI文件风格，中括号中的字符为组名。可以将同一个主机同时归并到多个不同的组中。此外，如果目标主机使用了非默认的SSH端口，还可以在主机名称之后使用冒号加端口号来标明。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[webservers]</span><br><span class="line">www1.magedu.com:2222</span><br><span class="line">www2.magedu.com</span><br><span class="line"></span><br><span class="line">[dbservers]</span><br><span class="line">db1.magedu.com</span><br><span class="line">db2.magedu.com</span><br><span class="line">db3.magedu.com</span><br><span class="line"></span><br><span class="line">如果主机名称遵循相似的命名模式，还可以使用列表的方式标识各主机，例如：</span><br><span class="line">[webservers]</span><br><span class="line">www[01:50].example.com</span><br><span class="line"></span><br><span class="line">[databases]</span><br><span class="line">db-[a:f].example.com</span><br></pre></td></tr></table></figure>
<ul>
<li>主机变量</li>
</ul>
<p>可以在inventory中定义主机时为其添加主机变量以便于在playbook中使用，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[webservers]</span><br><span class="line">www1.magedu.com http_port&#x3D;80 maxRequestsPerChild&#x3D;808</span><br><span class="line">www2.magedu.com http_port&#x3D;8080 maxRequestsPerChild&#x3D;909</span><br></pre></td></tr></table></figure>
<ul>
<li>组变量</li>
</ul>
<p>组变量是赋予给指定组内所有主机上的在playbook中可用的变量。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[webservers]</span><br><span class="line">www1.magedu.com</span><br><span class="line">www2.magedu.com</span><br><span class="line"></span><br><span class="line">[webservers:vars]</span><br><span class="line">ntp_server&#x3D;ntp.magedu.com</span><br><span class="line">nfs_server&#x3D;nfs.magedu.com</span><br></pre></td></tr></table></figure>
<ul>
<li>组嵌套</li>
</ul>
<p>inventory中，组还可以包含其他的组，并且也可以向组中的主机指定变量。不过，这些变量只能在ansible-playbook中使用，而ansible不支持。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[apache]</span><br><span class="line">httpd1.magedu.com</span><br><span class="line">httpd2.magedu.com</span><br><span class="line"></span><br><span class="line">[nginx]</span><br><span class="line">ngx1.magedu.com</span><br><span class="line">ngx2.magedu.com</span><br><span class="line"></span><br><span class="line">[webservers:children]</span><br><span class="line">apache</span><br><span class="line">nginx</span><br><span class="line"></span><br><span class="line">[webservers:vars]</span><br><span class="line">ntp_server&#x3D;ntp.magedu.com</span><br></pre></td></tr></table></figure>
<ul>
<li>inventory参数</li>
</ul>
<p>ansible基于ssh连接inventory中指定的远程主机时，还可以通过参数指定其交互方式，<a target="_blank" rel="noopener" href="https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html">https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html</a></p>
<h1 id="ansible-playbook"><a href="#ansible-playbook" class="headerlink" title="ansible-playbook"></a>ansible-playbook</h1><p>playbook是由一个或多个play组成的列表，play的主要功能在于将事先归并为一组的主机装扮成事先通过ansible中的task定义好的角色。从根本上来讲，所谓task无非是调用ansible的一个module。将多个play组织在一个playbook中，即可以让它们连同起来按事先编排的机制同唱一台大戏。下面是一个简单示例。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- host: webnodes</span><br><span class="line">  vars:</span><br><span class="line">    http_port: 80</span><br><span class="line">    max_clients: 256</span><br><span class="line">  remote_user: root</span><br><span class="line">  tasks:</span><br><span class="line">  - name: ensure apache is at the latest version</span><br><span class="line">    yum: name&#x3D;httpd state&#x3D;latest</span><br><span class="line">  - name: ensure apache is running</span><br><span class="line">    service: name&#x3D;httpd state&#x3D;started</span><br><span class="line">  handlers:</span><br><span class="line">    - name: restart apache</span><br><span class="line">      service: name&#x3D;httpd state&#x3D;restarted</span><br></pre></td></tr></table></figure>

















      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/07/10/centos-yum-%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/10/centos-yum-%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">centos yum 详解</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-10 16:44:54" itemprop="dateCreated datePublished" datetime="2019-07-10T16:44:54+08:00">2019-07-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-22 16:16:36" itemprop="dateModified" datetime="2020-03-22T16:16:36+08:00">2020-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="NAME"><a href="#NAME" class="headerlink" title="NAME"></a>NAME</h1><p>yum - Yellowdog Updater Modified</p>
<h1 id="SYNOPSIS"><a href="#SYNOPSIS" class="headerlink" title="SYNOPSIS"></a>SYNOPSIS</h1><p>yum [options] [command] [package …]</p>
<h1 id="DESCRIPTION"><a href="#DESCRIPTION" class="headerlink" title="DESCRIPTION"></a>DESCRIPTION</h1><p> yum是一个基于rpm的交互式package manager。 它可以自动执行系统更新，包括依赖分析和基于<code>repository</code>元数据的过时处理。 它还可以安装新软件包，删除旧软件包以及对已安装的或者可用软件包执行查询。yum类似于apt-get和smart等其他高级包管理器。</p>
<p>command是以下之一：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">* install package1 [package2] [...]</span><br><span class="line">* update [package1] [package2] [...]</span><br><span class="line">* update-to [package1] [package2] [...]</span><br><span class="line">* update-minimal [package1] [package2] [...]</span><br><span class="line">* check-update</span><br><span class="line">* upgrade [package1] [package2] [...]</span><br><span class="line">* upgrade-to [package1] [package2] [...]</span><br><span class="line">* distribution-synchronization [package1] [package2] [...]</span><br><span class="line">* remove | erase package1 [package2] [...]</span><br><span class="line">* autoremove [package1] [...]</span><br><span class="line">* list [...]</span><br><span class="line">* info [...]</span><br><span class="line">* provides | whatprovides feature1 [feature2] [...]</span><br><span class="line">* clean [ packages | metadata | expire-cache | rpmdb | plugins | all ]</span><br><span class="line">* makecache [fast]</span><br><span class="line">* groups [...]</span><br><span class="line">* search string1 [string2] [...]</span><br><span class="line">* shell [filename]</span><br><span class="line">* resolvedep dep1 [dep2] [...]</span><br><span class="line">	(maintained for legacy reasons only - use repoquery or yum provides)</span><br><span class="line">* localinstall rpmfile1 [rpmfile2] [...]</span><br><span class="line">	(maintained for legacy reasons only - use install)</span><br><span class="line">* localupdate rpmfile1 [rpmfile2] [...]</span><br><span class="line">	(maintained for legacy reasons only - use update)</span><br><span class="line">* reinstall package1 [package2] [...]</span><br><span class="line">* downgrade package1 [package2] [...]</span><br><span class="line">* deplist package1 [package2] [...]</span><br><span class="line">* repolist [all|enabled|disabled]</span><br><span class="line">* repoinfo [all|enabled|disabled]</span><br><span class="line">* repository-packages &lt;enabled-repoid&gt; &lt;install|remove|remove-or-reinstall|remove-or-distribution-synchronization&gt; [package2] [...]</span><br><span class="line">* version [ all | installed | available | group-* | nogroups* | grouplist | groupinfo ]</span><br><span class="line">* history [info|list|packages-list|packages-info|summary|addon-info|redo|undo|rollback|new|sync|stats]</span><br><span class="line">* load-transaction [txfile]</span><br><span class="line">* updateinfo [summary | list | info | remove-pkgs-ts | exclude-updates | exclude-all | check-running-kernel]</span><br><span class="line">* fssnapshot [summary | list | have-space | create | delete]</span><br><span class="line">* fs [filters | refilter | refilter-cleanup | du]</span><br><span class="line">* check</span><br><span class="line">* help [command]</span><br><span class="line"></span><br><span class="line">除非给出--help或-h选项，否则必须存在上述命令之一。</span><br><span class="line"></span><br><span class="line">常用的命令如下：</span><br><span class="line">install</span><br><span class="line">	用于安装最新版本的软件包或软件包组，同时确保满足所有依赖项。</span><br><span class="line"></span><br><span class="line">update</span><br><span class="line">	如果在没有指定任何包的情况下，update将更新所有当前安装的包。如果指定了一个或多个包或包，则Yum将仅更新列出的包。在更新包时，yum将确保满足所有依赖关系。</span><br><span class="line"></span><br><span class="line">update-to</span><br><span class="line">	此命令的作用类似于“update”，但是要指定包的版本。</span><br><span class="line"></span><br><span class="line">check-update</span><br><span class="line">	检查是否有需要更新的包。</span><br><span class="line"></span><br><span class="line">remove or erase</span><br><span class="line">	用于从系统中删除指定的包。</span><br><span class="line"></span><br><span class="line">autoremove</span><br><span class="line">	用于从系统中删除指定的包以及依赖。</span><br><span class="line"></span><br><span class="line">list</span><br><span class="line">	用于列出有关可用包的各种信息。</span><br><span class="line"></span><br><span class="line">provides or whatprovides</span><br><span class="line">	用于找出哪个包提供某些功能或文件。</span><br><span class="line">	</span><br><span class="line">search</span><br><span class="line">	当您对包知道一些但不确定它的名称时，这用于查找包。 默认情况下，搜索将尝试仅搜索包名称和摘要，但如果“失败”，则会尝试描述和URL。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/07/02/Linux%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/02/Linux%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">Linux常用操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-02 11:13:31" itemprop="dateCreated datePublished" datetime="2019-07-02T11:13:31+08:00">2019-07-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-07-17 12:05:46" itemprop="dateModified" datetime="2020-07-17T12:05:46+08:00">2020-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Python-pip"><a href="#Python-pip" class="headerlink" title="Python pip"></a>Python pip</h3><p>Python pip安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum -y install python-setuptools</span><br><span class="line">easy install pip</span><br><span class="line">或者</span><br><span class="line">curl &quot;https:&#x2F;&#x2F;bootstrap.pypa.io&#x2F;get-pip.py&quot; -o &quot;get-pip.py&quot;</span><br><span class="line">python get-pip.py</span><br></pre></td></tr></table></figure>
<p>Python pip更新包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade setuptools -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</span><br><span class="line"></span><br><span class="line">更新包是遇到类似问题，需要重新装</span><br><span class="line">ERROR: Cannot uninstall &#39;pyparsing&#39;. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.</span><br><span class="line">sudo pip install -I tox -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</span><br></pre></td></tr></table></figure>
<p>Python pip国内源指定</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pip install setuptools -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</span><br><span class="line"></span><br><span class="line">或者在 ~&#x2F;.pip&#x2F;pip.conf 中添加</span><br><span class="line">[global]</span><br><span class="line">index-url&#x3D;http:&#x2F;&#x2F;pypi.douban.com&#x2F;simple&#x2F;</span><br><span class="line">#index-url&#x3D;https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</span><br></pre></td></tr></table></figure>
<p>Python开源项目编译安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、下载开源项目源代码</span><br><span class="line">2、安装依赖</span><br><span class="line">pip install -r requirements.txt</span><br><span class="line">3、安装开源项目</span><br><span class="line">python setup.py install</span><br></pre></td></tr></table></figure>
<p>Python安装.whl文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install some-package.whl</span><br></pre></td></tr></table></figure>
<p>安装python3</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum -y install python36 python36-tools</span><br><span class="line"></span><br><span class="line">安装python3的pip</span><br><span class="line">curl &quot;https:&#x2F;&#x2F;bootstrap.pypa.io&#x2F;get-pip.py&quot; -o &quot;get-pip.py&quot;</span><br><span class="line">python3.6 get-pip.py</span><br></pre></td></tr></table></figure>
<h3 id="Centos-7升级GCC-7"><a href="#Centos-7升级GCC-7" class="headerlink" title="Centos 7升级GCC 7"></a>Centos 7升级GCC 7</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1、确定g++默认使用的C++标准：</span><br><span class="line">g++ -dM -E -x c++ &#x2F;dev&#x2F;null | grep -F __cplusplus</span><br><span class="line"></span><br><span class="line">2、安装devtoolset-7</span><br><span class="line">yum install -y centos-release-scl &amp;&amp; yum install -y devtoolset-7-gcc-c++</span><br><span class="line"></span><br><span class="line">3、使用GCC 7</span><br><span class="line">scl enable devtoolset-7 bash</span><br></pre></td></tr></table></figure>
<h3 id="Centos安装扩展源"><a href="#Centos安装扩展源" class="headerlink" title="Centos安装扩展源"></a>Centos安装扩展源</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y epel-release</span><br></pre></td></tr></table></figure>
<h3 id="Linux批量创建嵌套目录"><a href="#Linux批量创建嵌套目录" class="headerlink" title="Linux批量创建嵌套目录"></a>Linux批量创建嵌套目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -pv roles&#x2F;vdbench&#x2F;&#123;tasks,templates,meta,defaults,vars,files,plugins,handler&#125;</span><br></pre></td></tr></table></figure>
<h3 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h3><ul>
<li>tar.gz格式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">压缩（把ceph-14.2.1目录压缩为ceph-14.2.1.tar.gz）：tar zcf ceph-14.2.1.tar.gz ceph-14.2.1</span><br><span class="line">解压缩：tar zxf ceph-14.2.1.tar.gz</span><br></pre></td></tr></table></figure>
<h3 id="iperf检查网络带宽"><a href="#iperf检查网络带宽" class="headerlink" title="iperf检查网络带宽"></a>iperf检查网络带宽</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y epel-release</span><br><span class="line">sudo yum install -y iperf</span><br><span class="line">服务端</span><br><span class="line">	iperf -s -p 12345 -i 1 -M</span><br><span class="line">客户端</span><br><span class="line">	iperf -c 192.168.1.10 -p 12345 -i 1 -t 600 -w 100M</span><br></pre></td></tr></table></figure>
<h3 id="ubuntu-1804添加repository"><a href="#ubuntu-1804添加repository" class="headerlink" title="ubuntu 1804添加repository"></a>ubuntu 1804添加repository</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install software-properties-common</span><br><span class="line">sudo add-apt-repository --yes --update ppa:ansible&#x2F;ansible-2.8	（ 或 sudo apt-add-repository --yes --update ppa:ansible&#x2F;ansible ）</span><br><span class="line">sudo apt install ansible</span><br><span class="line"></span><br><span class="line">repository站点地址</span><br><span class="line">https:&#x2F;&#x2F;launchpad.net&#x2F;~ansible&#x2F;+archive&#x2F;ubuntu&#x2F;ansible-2.8</span><br></pre></td></tr></table></figure>
<h3 id="查看硬盘类型"><a href="#查看硬盘类型" class="headerlink" title="查看硬盘类型"></a>查看硬盘类型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;sys&#x2F;block&#x2F;sda&#x2F;queue&#x2F;rotational</span><br><span class="line">0为ssd，1为hdd</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/06/03/Ceph%E6%95%B0%E6%8D%AE%E6%AD%A3%E7%A1%AE%E6%80%A7%E4%B8%8E%E4%B8%80%E8%87%B4%E6%80%A7%E5%AE%88%E6%8A%A4%E8%80%85Scrub%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/03/Ceph%E6%95%B0%E6%8D%AE%E6%AD%A3%E7%A1%AE%E6%80%A7%E4%B8%8E%E4%B8%80%E8%87%B4%E6%80%A7%E5%AE%88%E6%8A%A4%E8%80%85Scrub%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">Ceph数据正确性与一致性守护者Scrub读书笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-06-03 16:17:02" itemprop="dateCreated datePublished" datetime="2019-06-03T16:17:02+08:00">2019-06-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-22 16:16:35" itemprop="dateModified" datetime="2020-03-22T16:16:35+08:00">2020-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://raw.githubusercontent.com/lnsyyj/lnsyyj.github.io/hexo/Blog/source/_posts/Ceph%E6%95%B0%E6%8D%AE%E6%AD%A3%E7%A1%AE%E6%80%A7%E4%B8%8E%E4%B8%80%E8%87%B4%E6%80%A7%E5%AE%88%E6%8A%A4%E8%80%85Scrub%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Scrub.png"></p>
<p>Ceph关于Scrub相关配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">OPTION(mon_warn_not_scrubbed, OPT_INT)                  &#x2F;&#x2F;</span><br><span class="line">OPTION(mon_warn_not_deep_scrubbed, OPT_INT)             &#x2F;&#x2F;</span><br><span class="line">OPTION(mon_scrub_interval, OPT_INT)                     &#x2F;&#x2F; 默认值：一天一次</span><br><span class="line">OPTION(mon_scrub_timeout, OPT_INT)                      &#x2F;&#x2F; 默认值：5分钟</span><br><span class="line">OPTION(mon_scrub_max_keys, OPT_INT)                     &#x2F;&#x2F; 每次scrub的最大key数</span><br><span class="line">OPTION(mon_scrub_inject_crc_mismatch, OPT_DOUBLE)       &#x2F;&#x2F; 注入crc不匹配的概率[0.0,1.0]</span><br><span class="line">OPTION(mon_scrub_inject_missing_keys, OPT_DOUBLE)       &#x2F;&#x2F; 注入缺失key的概率[0.0,1.0]</span><br><span class="line">OPTION(mds_max_scrub_ops_in_progress, OPT_INT)          &#x2F;&#x2F; 并行执行的最大scrub操作数，允许同时scrub的数量</span><br><span class="line"></span><br><span class="line">OPTION(osd_op_queue_mclock_scrub_res, OPT_DOUBLE)       &#x2F;&#x2F; </span><br><span class="line">OPTION(osd_op_queue_mclock_scrub_wgt, OPT_DOUBLE)       &#x2F;&#x2F; </span><br><span class="line">OPTION(osd_op_queue_mclock_scrub_lim, OPT_DOUBLE)       &#x2F;&#x2F; </span><br><span class="line">OPTION(osd_scrub_invalid_stats, OPT_BOOL)               &#x2F;&#x2F; </span><br><span class="line">OPTION(osd_max_scrubs, OPT_INT)                         &#x2F;&#x2F; 单个OSD最大并发scrub数</span><br><span class="line">OPTION(osd_scrub_during_recovery, OPT_BOOL)             &#x2F;&#x2F; 当OSD上的PG正在recovery时允许scrub</span><br><span class="line">OPTION(osd_scrub_begin_hour, OPT_INT)                   &#x2F;&#x2F; 限制scrubbing在每天几点开始</span><br><span class="line">OPTION(osd_scrub_end_hour, OPT_INT)                     &#x2F;&#x2F; 限制scrubbing在每天几点结束</span><br><span class="line">OPTION(osd_scrub_begin_week_day, OPT_INT)               &#x2F;&#x2F; 限制scrubbing在一周中的哪天开始（星期几开始，0 or 7 &#x3D; Sunday, 1 &#x3D; Monday, etc.）</span><br><span class="line">OPTION(osd_scrub_end_week_day, OPT_INT)                 &#x2F;&#x2F; 限制scrubbing在一周中的哪天结束（星期几结束，0 or 7 &#x3D; Sunday, 1 &#x3D; Monday, etc.）</span><br><span class="line">OPTION(osd_scrub_load_threshold, OPT_FLOAT)             &#x2F;&#x2F; 允许scrubbing低于系统负载（system load）除以CPU数量的值</span><br><span class="line">OPTION(osd_scrub_min_interval, OPT_FLOAT)               &#x2F;&#x2F; 每隔一次PG Scrub频率不超过此间隔（如果负载低）</span><br><span class="line">OPTION(osd_scrub_max_interval, OPT_FLOAT)               &#x2F;&#x2F; 每隔一次PG Scrub频率不低于此间隔（无论负载如何）</span><br><span class="line">OPTION(osd_scrub_interval_randomize_ratio, OPT_FLOAT)   &#x2F;&#x2F; scrub间隔的比率随机变化，这可以通过随机改变scrub间隔来防止scrub 踩踏，以便它们很快在一周内均匀分布，在[min，min *（1 + randomize_ratio））的范围内随机化调度scrub</span><br><span class="line">OPTION(osd_scrub_backoff_ratio, OPT_DOUBLE)             &#x2F;&#x2F; scrub调度尝试失败后的退避率，the probability to back off the scheduled scrub</span><br><span class="line">OPTION(osd_scrub_chunk_min, OPT_INT)                    &#x2F;&#x2F; 在单个chunk中scrub的最小对象数</span><br><span class="line">OPTION(osd_scrub_chunk_max, OPT_INT)                    &#x2F;&#x2F; 在单个chunk中scrub的最大对象数</span><br><span class="line">OPTION(osd_scrub_sleep, OPT_FLOAT)                      &#x2F;&#x2F; 持续scrub过程中注入延迟（在deep scrubbing操作之间sleep）</span><br><span class="line">OPTION(osd_scrub_auto_repair, OPT_BOOL)                 &#x2F;&#x2F; 自动修复scrub过程中检测到的受损对象（是否在deep-scrubbing时自动修复不一致）</span><br><span class="line">OPTION(osd_scrub_auto_repair_num_errors, OPT_U32)       &#x2F;&#x2F; 自动修复的最大检测错误数（仅在错误数低于此阈值时自动修复）</span><br><span class="line">OPTION(osd_deep_scrub_interval, OPT_FLOAT)              &#x2F;&#x2F; Deep scrub每个PG（即，验证数据校验和）（每周一次）</span><br><span class="line">OPTION(osd_deep_scrub_randomize_ratio, OPT_FLOAT)       &#x2F;&#x2F; Deep scrub间隔比例随机变化，这可以通过随机改变scrub间隔来防止deep scrub 踩踏，当没有用户启动scrub时添加随机，scrub将随机变成这种速率的deep scrub（0.15  - &gt; 15％ deep scrub）</span><br><span class="line">OPTION(osd_deep_scrub_stride, OPT_INT)                  &#x2F;&#x2F; Deep scrub期间一次从对象读取的字节数</span><br><span class="line">OPTION(osd_deep_scrub_keys, OPT_INT)                    &#x2F;&#x2F; Deep scrub期间一次从对象读取的key数</span><br><span class="line">OPTION(osd_deep_scrub_update_digest_min_age, OPT_INT)   &#x2F;&#x2F; 仅当对象的上次修改时间超过此时间时才更新整体对象digest（摘要）</span><br><span class="line">OPTION(osd_deep_scrub_large_omap_object_key_threshold, OPT_U64)         &#x2F;&#x2F; 当我们遇到某个对象的omap key多于此阈值时，发出警告</span><br><span class="line">OPTION(osd_deep_scrub_large_omap_object_value_sum_threshold, OPT_U64)   &#x2F;&#x2F; 当我们遇到某个对象的omap key bytes大小多于此阈值时，发出警告</span><br><span class="line">OPTION(osd_debug_deep_scrub_sleep, OPT_FLOAT)           &#x2F;&#x2F; 在deep scrub IO期间注入sleep以使其更容易induce preemption（诱导抢占）</span><br><span class="line">OPTION(osd_scrub_priority, OPT_U32)                     &#x2F;&#x2F; 工作队列中的scrub操作的优先级</span><br><span class="line">OPTION(osd_scrub_cost, OPT_U32)                         &#x2F;&#x2F; 工作队列中的scrub操作的cost（设置默认cost等于50MB io）（cost翻译为成本，需要看代码到底指的是什么）</span><br><span class="line">OPTION(osd_requested_scrub_priority, OPT_U32)           &#x2F;&#x2F; 设置请求的scrub优先级高于scrub优先级，使请求的scrub跳过预定scrub的队列</span><br></pre></td></tr></table></figure>


<p>临时结论：</p>
<p>1、目前无法避免静默错误，Scrub也无法修复严重的静默错误</p>
<p>2、Scrub是Ceph检测静默错误的机制</p>
<p>3、目前发现静默错误也没有好的方法修复（只能通知客户尽可能挽回数据）</p>
<p>想法：</p>
<p>1、借助Scrub作为测试正确性与一致性的工具（需要解决覆盖写问题）</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/05/29/%E5%BE%AE%E4%BF%A1%E6%8A%A2%E7%A5%A8%E5%8A%A0%E9%80%9F%E4%BA%92%E5%8A%A9%E7%BE%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/29/%E5%BE%AE%E4%BF%A1%E6%8A%A2%E7%A5%A8%E5%8A%A0%E9%80%9F%E4%BA%92%E5%8A%A9%E7%BE%A4/" class="post-title-link" itemprop="url">微信抢票加速互助群</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-05-29 21:54:19" itemprop="dateCreated datePublished" datetime="2019-05-29T21:54:19+08:00">2019-05-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-22 16:16:36" itemprop="dateModified" datetime="2020-03-22T16:16:36+08:00">2020-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>加群请加微信：yjtcok（注明：微信抢票）</p>
<p>本群只为抢票加速互助，不提供任何其他服务。不参与任何购物砍价，请大家知晓，谢谢。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/05/27/prometheus-node-exporter-%E7%9B%91%E6%8E%A7%E9%A1%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/27/prometheus-node-exporter-%E7%9B%91%E6%8E%A7%E9%A1%B9/" class="post-title-link" itemprop="url">prometheus node_exporter 监控项</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-05-27 14:01:45" itemprop="dateCreated datePublished" datetime="2019-05-27T14:01:45+08:00">2019-05-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-22 16:16:36" itemprop="dateModified" datetime="2020-03-22T16:16:36+08:00">2020-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>截止2019-05-24 node_exporter监控项整理。</p>
<h2 id="Collectors"><a href="#Collectors" class="headerlink" title="Collectors"></a>Collectors</h2><p>每个操作系统对collector的支持各不相同。 下表列出了所有现有collector和支持的系统。通过<code>--collector.&lt;name&gt;</code>标志来启用collector。默认情况下启用的collector可以通过<code>--no-collector.&lt;name&gt;</code>标志来禁用。</p>
<h3 id="默认情况下启用"><a href="#默认情况下启用" class="headerlink" title="默认情况下启用"></a>默认情况下启用</h3><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>OS</th>
</tr>
</thead>
<tbody><tr>
<td>arp</td>
<td>来自<code>/proc/net/arp</code>的ARP统计信息</td>
<td>Linux</td>
</tr>
<tr>
<td>bcache</td>
<td>来自<code>/sys/fs/bcache/</code>的bcache统计信息</td>
<td>Linux</td>
</tr>
<tr>
<td>bonding</td>
<td>Linux bonding interfaces已配置active slave的数量</td>
<td>Linux</td>
</tr>
<tr>
<td>boottime</td>
<td>从<code>kern.boottime</code> sysctl派生的系统启动时间</td>
<td>Darwin, Dragonfly, FreeBSD, NetBSD, OpenBSD, Solaris</td>
</tr>
<tr>
<td>conntrack</td>
<td>显示conntrack统计信息（如果没有<code>/proc/sys/net/netfilter/</code>，则不执行任何操作）</td>
<td>Linux</td>
</tr>
<tr>
<td>cpu</td>
<td>CPU统计信息</td>
<td>Darwin, Dragonfly, FreeBSD, Linux, Solaris</td>
</tr>
<tr>
<td>cpufreq</td>
<td>CPU频率统计信息</td>
<td>Linux, Solaris</td>
</tr>
<tr>
<td>diskstats</td>
<td>磁盘I/O统计信息</td>
<td>Darwin, Linux, OpenBSD</td>
</tr>
<tr>
<td>edac</td>
<td>检错和纠错的统计数据</td>
<td>Linux</td>
</tr>
<tr>
<td>entropy</td>
<td>可用的熵（entropy）</td>
<td>Linux</td>
</tr>
<tr>
<td>exec</td>
<td>execution统计信息</td>
<td>Dragonfly, FreeBSD</td>
</tr>
<tr>
<td>filefd</td>
<td>来自<code>/proc/sys/fs/file-nr</code>的文件描述符统计信息</td>
<td>Linux</td>
</tr>
<tr>
<td>filesystem</td>
<td>文件系统统计信息，例如使用的磁盘空间</td>
<td>Darwin, Dragonfly, FreeBSD, Linux, OpenBSD</td>
</tr>
<tr>
<td>hwmon</td>
<td>来自<code>/sys/class/hwmon/</code>的硬件监控和传感器数据</td>
<td>Linux</td>
</tr>
<tr>
<td>infiniband</td>
<td>特定于InfiniBand和Intel OmniPath配置的网络统计信息</td>
<td>Linux</td>
</tr>
<tr>
<td>ipvs</td>
<td>来自<code>/proc/net/ip_vs</code>的IPVS状态和来自<code>/proc/net/ip_vs_stats</code>的统计数据</td>
<td>Linux</td>
</tr>
<tr>
<td>loadavg</td>
<td>负载平均值</td>
<td>Darwin, Dragonfly, FreeBSD, Linux, NetBSD, OpenBSD, Solaris</td>
</tr>
<tr>
<td>mdadm</td>
<td>有关<code>/proc/mdstat</code>中设备的统计信息（如果没有<code>/proc/mdstat</code>，则不执行任何操作）</td>
<td>Linux</td>
</tr>
<tr>
<td>meminfo</td>
<td>内存统计信息</td>
<td>Darwin, Dragonfly, FreeBSD, Linux, OpenBSD</td>
</tr>
<tr>
<td>netclass</td>
<td>来自<code>/sys/class/net/</code>的网络接口信息</td>
<td>Linux</td>
</tr>
<tr>
<td>netdev</td>
<td>网络接口统计信息，如字节传输</td>
<td>Darwin, Dragonfly, FreeBSD, Linux, OpenBSD</td>
</tr>
<tr>
<td>netstat</td>
<td>来自<code>/proc/net/netstat</code>的网络统计信息。 这与<code>netstat -s</code>的信息相同</td>
<td>Linux</td>
</tr>
<tr>
<td>nfs</td>
<td>从<code>/proc/net/rpc/nfs</code>公开NFS客户端统计信息。 这与<code>nfsstat -c</code>的信息相同</td>
<td>Linux</td>
</tr>
<tr>
<td>nfsd</td>
<td>从<code>/proc/net/rpc/nfsd</code>公开NFS内核服务器统计信息。 这与<code>nfsstat -s</code>的信息相同</td>
<td>Linux</td>
</tr>
<tr>
<td>pressure</td>
<td>来自<code>/proc/pressure/</code>的压力失速统计</td>
<td>Linux (kernel 4.20+ and/or <a target="_blank" rel="noopener" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/accounting/psi.txt">CONFIG_PSI</a>)</td>
</tr>
<tr>
<td>sockstat</td>
<td>公开来自<code>/proc/net/sockstat</code>的各种统计信息</td>
<td>Linux</td>
</tr>
<tr>
<td>stat</td>
<td>来自<code>/proc/stat</code>的各种统计信息。这包括启动时间，forks和interrupts。</td>
<td>Linux</td>
</tr>
<tr>
<td>textfile</td>
<td>从本地磁盘读取的统计信息。必须设置<code>--collector.textfile.directory</code>标志</td>
<td><em>any</em></td>
</tr>
<tr>
<td>time</td>
<td>当前的系统时间</td>
<td><em>any</em></td>
</tr>
<tr>
<td>timex</td>
<td>selected adjtimex(2) system call统计信息</td>
<td>Linux</td>
</tr>
<tr>
<td>uname</td>
<td>uname系统调用提供的系统信息</td>
<td>FreeBSD, Linux</td>
</tr>
<tr>
<td>vmstat</td>
<td>来自<code>/proc/vmstat</code>的统计信息</td>
<td>Linux</td>
</tr>
<tr>
<td>xfs</td>
<td>XFS运行时统计信息</td>
<td>Linux (kernel 4.4+)</td>
</tr>
<tr>
<td>zfs</td>
<td><a target="_blank" rel="noopener" href="http://open-zfs.org/">ZFS</a>性能统计数据</td>
<td><a target="_blank" rel="noopener" href="http://zfsonlinux.org/">Linux</a>, Solaris</td>
</tr>
</tbody></table>
<h3 id="默认情况下禁用"><a href="#默认情况下禁用" class="headerlink" title="默认情况下禁用"></a>默认情况下禁用</h3><p>由于内核配置和安全设置，默认情况下，所有Linux系统上的perf收集器可能无法正常工作。 要允许访问，请设置以下sysctl参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -w kernel.perf_event_paranoid&#x3D;X</span><br></pre></td></tr></table></figure>
<p>2 仅允许用户空间度量（自Linux 4.6起默认）。</p>
<p>1 允许内核和用户度量（在Linux 4.6之前默认）。</p>
<p>0 允许访问特定CPU的数据，但不允许访问raw tracepoint samples。</p>
<p>-1 没有限制。</p>
<p>根据配置的值，将提供不同的度量标准，对于大多数情况，<code>0</code>将提供最完整的设置。 有关更多信息，请参阅<code>man 2 perf_event_open</code>。</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>OS</th>
</tr>
</thead>
<tbody><tr>
<td>buddyinfo</td>
<td>/proc/buddyinfo报告的内存碎片统计信息</td>
<td>Linux</td>
</tr>
<tr>
<td>devstat</td>
<td>设备统计信息</td>
<td>Dragonfly, FreeBSD</td>
</tr>
<tr>
<td>drbd</td>
<td>分布式副本（Replicated）块设备统计信息（到版本8.4）</td>
<td>Linux</td>
</tr>
<tr>
<td>interrupts</td>
<td>详细的中断统计</td>
<td>Linux, OpenBSD</td>
</tr>
<tr>
<td>ksmd</td>
<td>来自<code>/sys/kernel/mm/ksm</code>的内核和系统统计信息</td>
<td>Linux</td>
</tr>
<tr>
<td>logind</td>
<td>会话计数来自<a target="_blank" rel="noopener" href="http://www.freedesktop.org/wiki/Software/systemd/logind/">logind</a></td>
<td>Linux</td>
</tr>
<tr>
<td>meminfo_numa</td>
<td>来自<code>/proc/meminfo_numa</code>的内存统计信息</td>
<td>Linux</td>
</tr>
<tr>
<td>mountstats</td>
<td>来自<code>/proc/self/mountstats</code>的文件系统统计信息。详细的NFS客户端统计信息。</td>
<td>Linux</td>
</tr>
<tr>
<td>ntp</td>
<td>本地NTP守护程序运行状况检查<a target="_blank" rel="noopener" href="https://github.com/prometheus/node_exporter/blob/master/docs/TIME.md">时间</a></td>
<td><em>any</em></td>
</tr>
<tr>
<td>processes</td>
<td>来自<code>/proc</code>的聚合进程统计信息</td>
<td>Linux</td>
</tr>
<tr>
<td>qdisc</td>
<td><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Network_scheduler#Linux_kernel">queuing discipline</a> 统计</td>
<td>Linux</td>
</tr>
<tr>
<td>runit</td>
<td>来自<a target="_blank" rel="noopener" href="http://smarden.org/runit/">runit</a>的服务状态统计</td>
<td><em>any</em></td>
</tr>
<tr>
<td>supervisord</td>
<td>来自<a target="_blank" rel="noopener" href="http://supervisord.org/">supervisord</a>的服务状态统计</td>
<td><em>any</em></td>
</tr>
<tr>
<td>systemd</td>
<td>来自<a target="_blank" rel="noopener" href="http://www.freedesktop.org/wiki/Software/systemd/">systemd</a>的服务和系统状态统计</td>
<td>Linux</td>
</tr>
<tr>
<td>tcpstat</td>
<td>来自<code>/proc/net/tcp</code>和<code>/proc/net/tcp6</code>的TCP连接状态信息。（警告：当前版本在高负载情况下存在潜在的性能问题。）</td>
<td>Linux</td>
</tr>
<tr>
<td>wifi</td>
<td>WiFi设备和station统计</td>
<td>Linux</td>
</tr>
<tr>
<td>perf</td>
<td>基于perf的指标（警告：指标取决于内核配置和设置）</td>
<td>Linux</td>
</tr>
</tbody></table>
<h3 id="Textfile-Collector"><a href="#Textfile-Collector" class="headerlink" title="Textfile Collector"></a>Textfile Collector</h3><p>textfile collector类似于<a target="_blank" rel="noopener" href="https://github.com/prometheus/pushgateway">Pushgateway</a>因为它允许从批处理job导出统计信息。它还可用于导出静态指标，例如计算机具有的role。Pushgateway应该用于服务级别指标。textfile模式用于绑定计算机的度量标准。</p>
<p>要使用它，请在Node exporter上设置<code>--collector.textfile.directory</code>标志。collector将使用文本格式解析该目录中与glob <code>*.prom</code>匹配的所有文件。 注意：不支持时间戳。</p>
<p>以原子方式推送cron job的完成时间：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo my_batch_job_completion_time $(date +%s) &gt; &#x2F;path&#x2F;to&#x2F;directory&#x2F;my_batch_job.prom.$$</span><br><span class="line">mv &#x2F;path&#x2F;to&#x2F;directory&#x2F;my_batch_job.prom.$$ &#x2F;path&#x2F;to&#x2F;directory&#x2F;my_batch_job.prom</span><br></pre></td></tr></table></figure>
<p>使用标签静态设置计算机的roles：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &#39;role&#123;role&#x3D;&quot;application_server&quot;&#125; 1&#39; &gt; &#x2F;path&#x2F;to&#x2F;directory&#x2F;role.prom.$$</span><br><span class="line">mv &#x2F;path&#x2F;to&#x2F;directory&#x2F;role.prom.$$ &#x2F;path&#x2F;to&#x2F;directory&#x2F;role.prom</span><br></pre></td></tr></table></figure>
<h3 id="Filtering-enabled-collectors"><a href="#Filtering-enabled-collectors" class="headerlink" title="Filtering enabled collectors"></a>Filtering enabled collectors</h3><p>默认情况下，<code>node_exporter</code>将从启用的collector中公开所有指标。 这是收集指标以避免在比较不同系列的指标时出错的建议方法。</p>
<p>高级使用<code>node_exporter</code>可以传递一个可选的收集器列表来过滤指标。 <code>collect[]</code>参数可以多次使用。 在Prometheus配置中，您可以在<a target="_blank" rel="noopener" href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#%3Cscrape_config%3E">scrape config</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">params:</span><br><span class="line">  collect[]:</span><br><span class="line">    - foo</span><br><span class="line">    - bar</span><br></pre></td></tr></table></figure>
<p>这对于让不同的Prometheus服务器从节点收集特定指标非常有用。</p>
<h2 id="部分监控项见下表"><a href="#部分监控项见下表" class="headerlink" title="部分监控项见下表"></a>部分监控项见下表</h2><table>
<thead>
<tr>
<th>Metrics</th>
<th>Chinese   explanation</th>
<th>English   explanation</th>
</tr>
</thead>
<tbody><tr>
<td>node_arp_entries</td>
<td>device的ARP表项</td>
<td>#   HELP node_arp_entries ARP entries by device</td>
</tr>
<tr>
<td>node_boot_time_seconds</td>
<td>节点启动时间，unixtime</td>
<td>#   HELP node_boot_time_seconds Node boot time, in unixtime.</td>
</tr>
<tr>
<td>node_context_switches_total</td>
<td>context   switches（上下文切换）的总数</td>
<td>#   HELP node_context_switches_total Total number of context switches.</td>
</tr>
<tr>
<td>node_cpu_guest_seconds_total</td>
<td>每种模式在guests(VM)上花费CPU的秒数</td>
<td>#   HELP node_cpu_guest_seconds_total Seconds the cpus spent in guests (VMs) for   each mode.</td>
</tr>
<tr>
<td>node_cpu_seconds_total</td>
<td>在每种模式下花费CPU的秒数</td>
<td>#   HELP node_cpu_seconds_total Seconds the cpus spent in each mode.</td>
</tr>
<tr>
<td>node_disk_io_now</td>
<td>当前正在进行的I/O数量</td>
<td>#   HELP node_disk_io_now The number of I/Os currently in progress.</td>
</tr>
<tr>
<td>node_disk_io_time_seconds_total</td>
<td>执行I/O所花费的总时间</td>
<td>#   HELP node_disk_io_time_seconds_total Total seconds spent doing I/Os.</td>
</tr>
<tr>
<td>node_disk_io_time_weighted_seconds_total</td>
<td>进行I/O所花费的加权秒数</td>
<td>#   HELP node_disk_io_time_weighted_seconds_total The weighted # of seconds spent   doing I/Os.</td>
</tr>
<tr>
<td>node_disk_read_bytes_total</td>
<td>成功读取的总字节数</td>
<td>#   HELP node_disk_read_bytes_total The total number of bytes read successfully.</td>
</tr>
<tr>
<td>node_disk_read_time_seconds_total</td>
<td>所有读取花费的总秒数</td>
<td>#   HELP node_disk_read_time_seconds_total The total number of seconds spent by   all reads.</td>
</tr>
<tr>
<td>node_disk_reads_completed_total</td>
<td>成功完成的读取总数</td>
<td>#   HELP node_disk_reads_completed_total The total number of reads completed   successfully.</td>
</tr>
<tr>
<td>node_disk_reads_merged_total</td>
<td>读合并的次数</td>
<td>#   HELP node_disk_reads_merged_total The total number of reads merged.</td>
</tr>
<tr>
<td>node_disk_write_time_seconds_total</td>
<td>这是所有写入花费的总秒数</td>
<td>#   HELP node_disk_write_time_seconds_total This is the total number of seconds   spent by all writes.</td>
</tr>
<tr>
<td>node_disk_writes_completed_total</td>
<td>成功完成的写入总数</td>
<td>#   HELP node_disk_writes_completed_total The total number of writes completed   successfully.</td>
</tr>
<tr>
<td>node_disk_writes_merged_total</td>
<td>写合并的次数</td>
<td>#   HELP node_disk_writes_merged_total The number of writes merged.</td>
</tr>
<tr>
<td>node_disk_written_bytes_total</td>
<td>成功写入的总字节数</td>
<td>#   HELP node_disk_written_bytes_total The total number of bytes written   successfully.</td>
</tr>
<tr>
<td>node_entropy_available_bits</td>
<td>可用entropy的Bits（比特）</td>
<td>#   HELP node_entropy_available_bits Bits of available entropy.</td>
</tr>
<tr>
<td>node_exporter_build_info</td>
<td>构建node_exporter的版本，修订版，分支和goversion标记，具有常量值“1”的metric</td>
<td>#   HELP node_exporter_build_info A metric with a constant ‘1’ value labeled by   version, revision, branch, and goversion from which node_exporter was built.</td>
</tr>
<tr>
<td>node_filefd_allocated</td>
<td>文件描述符统计：已分配</td>
<td>#   HELP node_filefd_allocated File descriptor statistics: allocated.</td>
</tr>
<tr>
<td>node_filefd_maximum</td>
<td>文件描述符统计：最大值</td>
<td>#   HELP node_filefd_maximum File descriptor statistics: maximum.</td>
</tr>
<tr>
<td>node_filesystem_avail_bytes</td>
<td>非root用户可用的文件系统空间（以字节为单位）</td>
<td>#   HELP node_filesystem_avail_bytes Filesystem space available to non-root users   in bytes.</td>
</tr>
<tr>
<td>node_filesystem_device_error</td>
<td>获取指定设备的统计信息时是否发生错误</td>
<td>#   HELP node_filesystem_device_error Whether an error occurred while getting   statistics for the given device.</td>
</tr>
<tr>
<td>node_filesystem_files</td>
<td>文件系统总的file   nodes数（inode）</td>
<td>#   HELP node_filesystem_files Filesystem total file nodes.</td>
</tr>
<tr>
<td>node_filesystem_files_free</td>
<td>文件系统空闲file   node数（inode）</td>
<td>#   HELP node_filesystem_files_free Filesystem total free file nodes.</td>
</tr>
<tr>
<td>node_filesystem_free_bytes</td>
<td>文件系统可用空间，以字节为单位</td>
<td>#   HELP node_filesystem_free_bytes Filesystem free space in bytes.</td>
</tr>
<tr>
<td>node_filesystem_readonly</td>
<td>文件系统只读状态</td>
<td>#   HELP node_filesystem_readonly Filesystem read-only status.</td>
</tr>
<tr>
<td>node_filesystem_size_bytes</td>
<td>文件系统大小（字节）</td>
<td>#   HELP node_filesystem_size_bytes Filesystem size in bytes.</td>
</tr>
<tr>
<td>node_forks_total</td>
<td>forks总数</td>
<td>#   HELP node_forks_total Total number of forks.</td>
</tr>
<tr>
<td>node_hwmon_chip_names</td>
<td>人类可读（可读性良好）的芯片名称的注释指标</td>
<td>#   HELP node_hwmon_chip_names Annotation metric for human-readable chip names</td>
</tr>
<tr>
<td>node_hwmon_sensor_label</td>
<td>给定芯片和传感器的标签</td>
<td>#   HELP node_hwmon_sensor_label Label for given chip and sensor</td>
</tr>
<tr>
<td>node_hwmon_temp_celsius</td>
<td>温度硬件监视器（输入）</td>
<td>#   HELP node_hwmon_temp_celsius Hardware monitor for temperature (input)</td>
</tr>
<tr>
<td>node_hwmon_temp_crit_alarm_celsius</td>
<td>温度硬件监控器（crit_alarm）</td>
<td>#   HELP node_hwmon_temp_crit_alarm_celsius Hardware monitor for temperature   (crit_alarm)</td>
</tr>
<tr>
<td>node_hwmon_temp_crit_celsius</td>
<td>温度硬件监控器（暴击）</td>
<td>#   HELP node_hwmon_temp_crit_celsius Hardware monitor for temperature (crit)</td>
</tr>
<tr>
<td>node_hwmon_temp_max_celsius</td>
<td>温度硬件监控器（最大）</td>
<td>#   HELP node_hwmon_temp_max_celsius Hardware monitor for temperature (max)</td>
</tr>
<tr>
<td>node_intr_total</td>
<td>服务的中断总数</td>
<td>#   HELP node_intr_total Total number of interrupts serviced.</td>
</tr>
<tr>
<td>node_load1</td>
<td>1m负载平均值</td>
<td>#   HELP node_load1 1m load average.</td>
</tr>
<tr>
<td>node_load15</td>
<td>15m负载平均值</td>
<td>#   HELP node_load15 15m load average.</td>
</tr>
<tr>
<td>node_load5</td>
<td>5m负载平均值</td>
<td>#   HELP node_load5 5m load average.</td>
</tr>
<tr>
<td>node_memory_Active_anon_bytes</td>
<td>内存信息字段Active_anon_bytes</td>
<td>#   HELP node_memory_Active_anon_bytes Memory information field   Active_anon_bytes.</td>
</tr>
<tr>
<td>node_memory_Active_bytes</td>
<td>内存信息字段Active_bytes</td>
<td>#   HELP node_memory_Active_bytes Memory information field Active_bytes.</td>
</tr>
<tr>
<td>node_memory_Active_file_bytes</td>
<td>内存信息字段Active_file_bytes</td>
<td>#   HELP node_memory_Active_file_bytes Memory information field   Active_file_bytes.</td>
</tr>
<tr>
<td>node_memory_AnonHugePages_bytes</td>
<td>内存信息字段AnonHugePages_bytes</td>
<td>#   HELP node_memory_AnonHugePages_bytes Memory information field   AnonHugePages_bytes.</td>
</tr>
<tr>
<td>node_memory_AnonPages_bytes</td>
<td>内存信息字段AnonPages_bytes</td>
<td>#   HELP node_memory_AnonPages_bytes Memory information field AnonPages_bytes.</td>
</tr>
<tr>
<td>node_memory_Bounce_bytes</td>
<td>内存信息字段Bounce_bytes</td>
<td>#   HELP node_memory_Bounce_bytes Memory information field Bounce_bytes.</td>
</tr>
<tr>
<td>node_memory_Buffers_bytes</td>
<td>内存信息字段Buffers_bytes</td>
<td>#   HELP node_memory_Buffers_bytes Memory information field Buffers_bytes.</td>
</tr>
<tr>
<td>node_memory_Cached_bytes</td>
<td>内存信息字段Cached_bytes</td>
<td>#   HELP node_memory_Cached_bytes Memory information field Cached_bytes.</td>
</tr>
<tr>
<td>node_memory_CmaFree_bytes</td>
<td>内存信息字段CmaFree_bytes</td>
<td>#   HELP node_memory_CmaFree_bytes Memory information field CmaFree_bytes.</td>
</tr>
<tr>
<td>node_memory_CmaTotal_bytes</td>
<td>内存信息字段CmaTotal_bytes</td>
<td>#   HELP node_memory_CmaTotal_bytes Memory information field CmaTotal_bytes.</td>
</tr>
<tr>
<td>node_memory_CommitLimit_bytes</td>
<td>内存信息字段CommitLimit_bytes</td>
<td>#   HELP node_memory_CommitLimit_bytes Memory information field   CommitLimit_bytes.</td>
</tr>
<tr>
<td>node_memory_Committed_AS_bytes</td>
<td>内存信息字段Committed_AS_bytes</td>
<td>#   HELP node_memory_Committed_AS_bytes Memory information field   Committed_AS_bytes.</td>
</tr>
<tr>
<td>node_memory_DirectMap1G_bytes</td>
<td>内存信息字段DirectMap1G_bytes</td>
<td>#   HELP node_memory_DirectMap1G_bytes Memory information field   DirectMap1G_bytes.</td>
</tr>
<tr>
<td>node_memory_DirectMap2M_bytes</td>
<td>内存信息字段DirectMap2M_bytes</td>
<td>#   HELP node_memory_DirectMap2M_bytes Memory information field   DirectMap2M_bytes.</td>
</tr>
<tr>
<td>node_memory_DirectMap4k_bytes</td>
<td>内存信息字段DirectMap4k_bytes</td>
<td>#   HELP node_memory_DirectMap4k_bytes Memory information field   DirectMap4k_bytes.</td>
</tr>
<tr>
<td>node_memory_Dirty_bytes</td>
<td>内存信息字段Dirty_bytes</td>
<td>#   HELP node_memory_Dirty_bytes Memory information field Dirty_bytes.</td>
</tr>
<tr>
<td>node_memory_HardwareCorrupted_bytes</td>
<td>内存信息字段HardwareCorrupted_bytes</td>
<td>#   HELP node_memory_HardwareCorrupted_bytes Memory information field   HardwareCorrupted_bytes.</td>
</tr>
<tr>
<td>node_memory_HugePages_Free</td>
<td>内存信息字段HugePages_Free</td>
<td>#   HELP node_memory_HugePages_Free Memory information field HugePages_Free.</td>
</tr>
<tr>
<td>node_memory_HugePages_Rsvd</td>
<td>内存信息字段HugePages_Rsvd</td>
<td>#   HELP node_memory_HugePages_Rsvd Memory information field HugePages_Rsvd.</td>
</tr>
<tr>
<td>node_memory_HugePages_Surp</td>
<td>内存信息字段HugePages_Surp</td>
<td>#   HELP node_memory_HugePages_Surp Memory information field HugePages_Surp.</td>
</tr>
<tr>
<td>node_memory_HugePages_Total</td>
<td>内存信息字段HugePages_Total</td>
<td>#   HELP node_memory_HugePages_Total Memory information field HugePages_Total.</td>
</tr>
<tr>
<td>node_memory_Hugepagesize_bytes</td>
<td>内存信息字段Hugepagesize_bytes</td>
<td>#   HELP node_memory_Hugepagesize_bytes Memory information field   Hugepagesize_bytes.</td>
</tr>
<tr>
<td>node_memory_Inactive_anon_bytes</td>
<td>内存信息字段Inactive_anon_bytes</td>
<td>#   HELP node_memory_Inactive_anon_bytes Memory information field   Inactive_anon_bytes.</td>
</tr>
<tr>
<td>node_memory_Inactive_bytes</td>
<td>内存信息字段Inactive_bytes</td>
<td>#   HELP node_memory_Inactive_bytes Memory information field Inactive_bytes.</td>
</tr>
<tr>
<td>node_memory_Inactive_file_bytes</td>
<td>内存信息字段Inactive_file_bytes</td>
<td>#   HELP node_memory_Inactive_file_bytes Memory information field   Inactive_file_bytes.</td>
</tr>
<tr>
<td>node_memory_KernelStack_bytes</td>
<td>内存信息字段KernelStack_bytes</td>
<td>#   HELP node_memory_KernelStack_bytes Memory information field   KernelStack_bytes.</td>
</tr>
<tr>
<td>node_memory_Mapped_bytes</td>
<td>内存信息字段Mapped_bytes</td>
<td>#   HELP node_memory_Mapped_bytes Memory information field Mapped_bytes.</td>
</tr>
<tr>
<td>node_memory_MemAvailable_bytes</td>
<td>内存信息字段MemAvailable_bytes</td>
<td>#   HELP node_memory_MemAvailable_bytes Memory information field   MemAvailable_bytes.</td>
</tr>
<tr>
<td>node_memory_MemFree_bytes</td>
<td>内存信息字段MemFree_bytes</td>
<td>#   HELP node_memory_MemFree_bytes Memory information field MemFree_bytes.</td>
</tr>
<tr>
<td>node_memory_MemTotal_bytes</td>
<td>内存信息字段MemTotal_bytes</td>
<td>#   HELP node_memory_MemTotal_bytes Memory information field MemTotal_bytes.</td>
</tr>
<tr>
<td>node_memory_Mlocked_bytes</td>
<td>内存信息字段Mlocked_bytes</td>
<td>#   HELP node_memory_Mlocked_bytes Memory information field Mlocked_bytes.</td>
</tr>
<tr>
<td>node_memory_NFS_Unstable_bytes</td>
<td>内存信息字段NFS_Unstable_bytes</td>
<td>#   HELP node_memory_NFS_Unstable_bytes Memory information field   NFS_Unstable_bytes.</td>
</tr>
<tr>
<td>node_memory_PageTables_bytes</td>
<td>内存信息字段PageTables_bytes</td>
<td>#   HELP node_memory_PageTables_bytes Memory information field PageTables_bytes.</td>
</tr>
<tr>
<td>node_memory_SReclaimable_bytes</td>
<td>内存信息字段SReclaimable_bytes</td>
<td>#   HELP node_memory_SReclaimable_bytes Memory information field   SReclaimable_bytes.</td>
</tr>
<tr>
<td>node_memory_SUnreclaim_bytes</td>
<td>内存信息字段SUnreclaim_bytes</td>
<td>#   HELP node_memory_SUnreclaim_bytes Memory information field SUnreclaim_bytes.</td>
</tr>
<tr>
<td>node_memory_Shmem_bytes</td>
<td>内存信息字段Shmem_bytes</td>
<td>#   HELP node_memory_Shmem_bytes Memory information field Shmem_bytes.</td>
</tr>
<tr>
<td>node_memory_Slab_bytes</td>
<td>内存信息字段Slab_bytes</td>
<td>#   HELP node_memory_Slab_bytes Memory information field Slab_bytes.</td>
</tr>
<tr>
<td>node_memory_SwapCached_bytes</td>
<td>内存信息字段SwapCached_bytes</td>
<td>#   HELP node_memory_SwapCached_bytes Memory information field SwapCached_bytes.</td>
</tr>
<tr>
<td>node_memory_SwapFree_bytes</td>
<td>内存信息字段SwapFree_bytes</td>
<td>#   HELP node_memory_SwapFree_bytes Memory information field SwapFree_bytes.</td>
</tr>
<tr>
<td>node_memory_SwapTotal_bytes</td>
<td>内存信息字段SwapTotal_bytes</td>
<td>#   HELP node_memory_SwapTotal_bytes Memory information field SwapTotal_bytes.</td>
</tr>
<tr>
<td>node_memory_Unevictable_bytes</td>
<td>内存信息字段Unevictable_bytes</td>
<td>#   HELP node_memory_Unevictable_bytes Memory information field   Unevictable_bytes.</td>
</tr>
<tr>
<td>node_memory_VmallocChunk_bytes</td>
<td>内存信息字段VmallocChunk_bytes</td>
<td>#   HELP node_memory_VmallocChunk_bytes Memory information field   VmallocChunk_bytes.</td>
</tr>
<tr>
<td>node_memory_VmallocTotal_bytes</td>
<td>内存信息字段VmallocTotal_bytes</td>
<td>#   HELP node_memory_VmallocTotal_bytes Memory information field   VmallocTotal_bytes.</td>
</tr>
<tr>
<td>node_memory_VmallocUsed_bytes</td>
<td>内存信息字段VmallocUsed_bytes</td>
<td>#   HELP node_memory_VmallocUsed_bytes Memory information field   VmallocUsed_bytes.</td>
</tr>
<tr>
<td>node_memory_WritebackTmp_bytes</td>
<td>内存信息字段WritebackTmp_bytes</td>
<td>#   HELP node_memory_WritebackTmp_bytes Memory information field   WritebackTmp_bytes.</td>
</tr>
<tr>
<td>node_memory_Writeback_bytes</td>
<td>内存信息字段Writeback_bytes</td>
<td>#   HELP node_memory_Writeback_bytes Memory information field Writeback_bytes.</td>
</tr>
<tr>
<td>node_netstat_Icmp6_InErrors</td>
<td>统计Icmp6InErrors</td>
<td>#   HELP node_netstat_Icmp6_InErrors Statistic Icmp6InErrors.</td>
</tr>
<tr>
<td>node_netstat_Icmp6_InMsgs</td>
<td>统计Icmp6InMsgs</td>
<td>#   HELP node_netstat_Icmp6_InMsgs Statistic Icmp6InMsgs.</td>
</tr>
<tr>
<td>node_netstat_Icmp6_OutMsgs</td>
<td>统计Icmp6OutMsgs</td>
<td>#   HELP node_netstat_Icmp6_OutMsgs Statistic Icmp6OutMsgs.</td>
</tr>
<tr>
<td>node_netstat_Icmp_InErrors</td>
<td>统计IcmpInErrors</td>
<td>#   HELP node_netstat_Icmp_InErrors Statistic IcmpInErrors.</td>
</tr>
<tr>
<td>node_netstat_Icmp_InMsgs</td>
<td>统计IcmpInMsgs</td>
<td>#   HELP node_netstat_Icmp_InMsgs Statistic IcmpInMsgs.</td>
</tr>
<tr>
<td>node_netstat_Icmp_OutMsgs</td>
<td>统计IcmpOutMsgs</td>
<td>#   HELP node_netstat_Icmp_OutMsgs Statistic IcmpOutMsgs.</td>
</tr>
<tr>
<td>node_netstat_Ip6_InOctets</td>
<td>统计Ip6InOctets</td>
<td>#   HELP node_netstat_Ip6_InOctets Statistic Ip6InOctets.</td>
</tr>
<tr>
<td>node_netstat_Ip6_OutOctets</td>
<td>统计Ip6OutOctets</td>
<td>#   HELP node_netstat_Ip6_OutOctets Statistic Ip6OutOctets.</td>
</tr>
<tr>
<td>node_netstat_IpExt_InOctets</td>
<td>统计IpExtInOctets</td>
<td>#   HELP node_netstat_IpExt_InOctets Statistic IpExtInOctets.</td>
</tr>
<tr>
<td>node_netstat_IpExt_OutOctets</td>
<td>统计IpExtOutOctets</td>
<td>#   HELP node_netstat_IpExt_OutOctets Statistic IpExtOutOctets.</td>
</tr>
<tr>
<td>node_netstat_Ip_Forwarding</td>
<td>统计IpForwarding</td>
<td>#   HELP node_netstat_Ip_Forwarding Statistic IpForwarding.</td>
</tr>
<tr>
<td>node_netstat_TcpExt_ListenDrops</td>
<td>统计TcpExtListenDrops</td>
<td>#   HELP node_netstat_TcpExt_ListenDrops Statistic TcpExtListenDrops.</td>
</tr>
<tr>
<td>node_netstat_TcpExt_ListenOverflows</td>
<td>统计TcpExtListenOverflows</td>
<td>#   HELP node_netstat_TcpExt_ListenOverflows Statistic TcpExtListenOverflows.</td>
</tr>
<tr>
<td>node_netstat_TcpExt_SyncookiesFailed</td>
<td>统计TcpExtSyncookiesFailed</td>
<td>#   HELP node_netstat_TcpExt_SyncookiesFailed Statistic TcpExtSyncookiesFailed.</td>
</tr>
<tr>
<td>node_netstat_TcpExt_SyncookiesRecv</td>
<td>统计TcpExtSyncookiesRecv</td>
<td>#   HELP node_netstat_TcpExt_SyncookiesRecv Statistic TcpExtSyncookiesRecv.</td>
</tr>
<tr>
<td>node_netstat_TcpExt_SyncookiesSent</td>
<td>统计TcpExtSyncookiesSent</td>
<td>#   HELP node_netstat_TcpExt_SyncookiesSent Statistic TcpExtSyncookiesSent.</td>
</tr>
<tr>
<td>node_netstat_TcpExt_TCPSynRetrans</td>
<td>统计TcpExtTCPSynRetrans</td>
<td>#   HELP node_netstat_TcpExt_TCPSynRetrans Statistic TcpExtTCPSynRetrans.</td>
</tr>
<tr>
<td>node_netstat_Tcp_ActiveOpens</td>
<td>统计TcpActiveOpens</td>
<td>#   HELP node_netstat_Tcp_ActiveOpens Statistic TcpActiveOpens.</td>
</tr>
<tr>
<td>node_netstat_Tcp_CurrEstab</td>
<td>统计TcpCurrEstab</td>
<td>#   HELP node_netstat_Tcp_CurrEstab Statistic TcpCurrEstab.</td>
</tr>
<tr>
<td>node_netstat_Tcp_InErrs</td>
<td>统计TcpInErrs</td>
<td>#   HELP node_netstat_Tcp_InErrs Statistic TcpInErrs.</td>
</tr>
<tr>
<td>node_netstat_Tcp_InSegs</td>
<td>统计TcpInSegs</td>
<td>#   HELP node_netstat_Tcp_InSegs Statistic TcpInSegs.</td>
</tr>
<tr>
<td>node_netstat_Tcp_OutSegs</td>
<td>统计TcpOutSegs</td>
<td>#   HELP node_netstat_Tcp_OutSegs Statistic TcpOutSegs.</td>
</tr>
<tr>
<td>node_netstat_Tcp_PassiveOpens</td>
<td>统计TcpPassiveOpens</td>
<td>#   HELP node_netstat_Tcp_PassiveOpens Statistic TcpPassiveOpens.</td>
</tr>
<tr>
<td>node_netstat_Tcp_RetransSegs</td>
<td>统计TcpRetransSegs</td>
<td>#   HELP node_netstat_Tcp_RetransSegs Statistic TcpRetransSegs.</td>
</tr>
<tr>
<td>node_netstat_Udp6_InDatagrams</td>
<td>统计Udp6InDatagrams</td>
<td>#   HELP node_netstat_Udp6_InDatagrams Statistic Udp6InDatagrams.</td>
</tr>
<tr>
<td>node_netstat_Udp6_InErrors</td>
<td>统计Udp6InErrors</td>
<td>#   HELP node_netstat_Udp6_InErrors Statistic Udp6InErrors.</td>
</tr>
<tr>
<td>node_netstat_Udp6_NoPorts</td>
<td>统计Udp6NoPorts</td>
<td>#   HELP node_netstat_Udp6_NoPorts Statistic Udp6NoPorts.</td>
</tr>
<tr>
<td>node_netstat_Udp6_OutDatagrams</td>
<td>统计Udp6OutDatagrams</td>
<td>#   HELP node_netstat_Udp6_OutDatagrams Statistic Udp6OutDatagrams.</td>
</tr>
<tr>
<td>node_netstat_UdpLite6_InErrors</td>
<td>统计UdpLite6InErrors</td>
<td>#   HELP node_netstat_UdpLite6_InErrors Statistic UdpLite6InErrors.</td>
</tr>
<tr>
<td>node_netstat_UdpLite_InErrors</td>
<td>统计UdpLiteInErrors</td>
<td>#   HELP node_netstat_UdpLite_InErrors Statistic UdpLiteInErrors.</td>
</tr>
<tr>
<td>node_netstat_Udp_InDatagrams</td>
<td>统计UdpInDatagrams</td>
<td>#   HELP node_netstat_Udp_InDatagrams Statistic UdpInDatagrams.</td>
</tr>
<tr>
<td>node_netstat_Udp_InErrors</td>
<td>统计UdpInErrors</td>
<td>#   HELP node_netstat_Udp_InErrors Statistic UdpInErrors.</td>
</tr>
<tr>
<td>node_netstat_Udp_NoPorts</td>
<td>统计UdpNoPorts</td>
<td>#   HELP node_netstat_Udp_NoPorts Statistic UdpNoPorts.</td>
</tr>
<tr>
<td>node_netstat_Udp_OutDatagrams</td>
<td>统计UdpOutDatagrams</td>
<td>#   HELP node_netstat_Udp_OutDatagrams Statistic UdpOutDatagrams.</td>
</tr>
<tr>
<td>node_network_address_assign_type</td>
<td>/sys/class/net/<iface>   address_assign_type值</td>
<td>#   HELP node_network_address_assign_type address_assign_type value of   /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_carrier</td>
<td>/sys/class/net/<iface>   carrier值</td>
<td>#   HELP node_network_carrier carrier value of /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_carrier_changes_total</td>
<td>/sys/class/net/<iface>   carrier_changes_total值</td>
<td>#   HELP node_network_carrier_changes_total carrier_changes_total value of   /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_device_id</td>
<td>/sys/class/net/<iface>   device_id值</td>
<td>#   HELP node_network_device_id device_id value of /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_dormant</td>
<td>/sys/class/net/<iface>   dormant（休眠）值</td>
<td>#   HELP node_network_dormant dormant value of /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_flags</td>
<td>/sys/class/net/<iface>   flags值</td>
<td>#   HELP node_network_flags flags value of /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_iface_id</td>
<td>/sys/class/net/<iface>   iface_id值</td>
<td>#   HELP node_network_iface_id iface_id value of /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_iface_link</td>
<td>/sys/class/net/<iface>   iface_link值</td>
<td>#   HELP node_network_iface_link iface_link value of   /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_iface_link_mode</td>
<td>/sys/class/net/<iface>   iface_link_mode值</td>
<td>#   HELP node_network_iface_link_mode iface_link_mode value of   /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_info</td>
<td>来自/sys/class/net/<iface>的非数字数据，值始终为1</td>
<td>#   HELP node_network_info Non-numeric data from /sys/class/net/<iface>,   value is always 1.</td>
</tr>
<tr>
<td>node_network_mtu_bytes</td>
<td>/sys/class/net/<iface>   mtu_bytes值</td>
<td>#   HELP node_network_mtu_bytes mtu_bytes value of /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_net_dev_group</td>
<td>/sys/class/net/<iface>   net_dev_group值</td>
<td>#   HELP node_network_net_dev_group net_dev_group value of   /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_protocol_type</td>
<td>/sys/class/net/<iface>   protocol_type值</td>
<td>#   HELP node_network_protocol_type protocol_type value of   /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_receive_bytes_total</td>
<td>网络设备统计信息receive_bytes</td>
<td>#   HELP node_network_receive_bytes_total Network device statistic receive_bytes.</td>
</tr>
<tr>
<td>node_network_receive_compressed_total</td>
<td>网络设备统计信息receive_compressed</td>
<td>#   HELP node_network_receive_compressed_total Network device statistic   receive_compressed.</td>
</tr>
<tr>
<td>node_network_receive_drop_total</td>
<td>网络设备统计信息receive_drop</td>
<td>#   HELP node_network_receive_drop_total Network device statistic receive_drop.</td>
</tr>
<tr>
<td>node_network_receive_errs_total</td>
<td>网络设备统计信息receive_errs</td>
<td>#   HELP node_network_receive_errs_total Network device statistic receive_errs.</td>
</tr>
<tr>
<td>node_network_receive_fifo_total</td>
<td>网络设备统计信息receive_fifo</td>
<td>#   HELP node_network_receive_fifo_total Network device statistic receive_fifo.</td>
</tr>
<tr>
<td>node_network_receive_frame_total</td>
<td>网络设备统计信息receive_frame</td>
<td>#   HELP node_network_receive_frame_total Network device statistic receive_frame.</td>
</tr>
<tr>
<td>node_network_receive_multicast_total</td>
<td>网络设备统计信息receive_multicast</td>
<td>#   HELP node_network_receive_multicast_total Network device statistic   receive_multicast.</td>
</tr>
<tr>
<td>node_network_receive_packets_total</td>
<td>网络设备统计信息receive_packets</td>
<td>#   HELP node_network_receive_packets_total Network device statistic   receive_packets.</td>
</tr>
<tr>
<td>node_network_speed_bytes</td>
<td>/sys/class/net/<iface>   speed_bytes值</td>
<td>#   HELP node_network_speed_bytes speed_bytes value of   /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_transmit_bytes_total</td>
<td>网络设备统计信息transmit_bytes</td>
<td>#   HELP node_network_transmit_bytes_total Network device statistic   transmit_bytes.</td>
</tr>
<tr>
<td>node_network_transmit_carrier_total</td>
<td>网络设备统计信息transmit_carrier</td>
<td>#   HELP node_network_transmit_carrier_total Network device statistic   transmit_carrier.</td>
</tr>
<tr>
<td>node_network_transmit_colls_total</td>
<td>网络设备统计信息transmit_colls</td>
<td>#   HELP node_network_transmit_colls_total Network device statistic   transmit_colls.</td>
</tr>
<tr>
<td>node_network_transmit_compressed_total</td>
<td>网络设备统计信息transmit_compressed</td>
<td>#   HELP node_network_transmit_compressed_total Network device statistic   transmit_compressed.</td>
</tr>
<tr>
<td>node_network_transmit_drop_total</td>
<td>网络设备统计信息transmit_drop</td>
<td>#   HELP node_network_transmit_drop_total Network device statistic transmit_drop.</td>
</tr>
<tr>
<td>node_network_transmit_errs_total</td>
<td>网络设备统计信息transmit_errs</td>
<td>#   HELP node_network_transmit_errs_total Network device statistic transmit_errs.</td>
</tr>
<tr>
<td>node_network_transmit_fifo_total</td>
<td>网络设备统计信息transmit_fifo</td>
<td>#   HELP node_network_transmit_fifo_total Network device statistic transmit_fifo.</td>
</tr>
<tr>
<td>node_network_transmit_packets_total</td>
<td>网络设备统计信息transmit_packets</td>
<td>#   HELP node_network_transmit_packets_total Network device statistic   transmit_packets.</td>
</tr>
<tr>
<td>node_network_transmit_queue_length</td>
<td>/sys/class/net/<iface>   transmit_queue_length值</td>
<td>#   HELP node_network_transmit_queue_length transmit_queue_length value of   /sys/class/net/<iface>.</td>
</tr>
<tr>
<td>node_network_up</td>
<td>如果operstate为’up’，则值为1，否则为0</td>
<td>#   HELP node_network_up Value is 1 if operstate is ‘up’, 0 otherwise.</td>
</tr>
<tr>
<td>node_procs_blocked</td>
<td>阻塞等待I/O完成的进程数</td>
<td>#   HELP node_procs_blocked Number of processes blocked waiting for I/O to   complete.</td>
</tr>
<tr>
<td>node_procs_running</td>
<td>处于可运行状态的进程数</td>
<td>#   HELP node_procs_running Number of processes in runnable state.</td>
</tr>
<tr>
<td>node_scrape_collector_duration_seconds</td>
<td>node_exporter：collector scrape持续时间</td>
<td>#   HELP node_scrape_collector_duration_seconds node_exporter: Duration of a   collector scrape.</td>
</tr>
<tr>
<td>node_scrape_collector_success</td>
<td>node_exporter：collector 是否成功</td>
<td>#   HELP node_scrape_collector_success node_exporter: Whether a collector   succeeded.</td>
</tr>
<tr>
<td>node_sockstat_FRAG_inuse</td>
<td>state   inuse中的FRAG sockets数量</td>
<td>#   HELP node_sockstat_FRAG_inuse Number of FRAG sockets in state inuse.</td>
</tr>
<tr>
<td>node_sockstat_FRAG_memory</td>
<td>state   memory（状态存储器）中的FRAG sockets数量</td>
<td>#   HELP node_sockstat_FRAG_memory Number of FRAG sockets in state memory.</td>
</tr>
<tr>
<td>node_sockstat_RAW_inuse</td>
<td>state   inuse中的RAW sockets数</td>
<td>#   HELP node_sockstat_RAW_inuse Number of RAW sockets in state inuse.</td>
</tr>
<tr>
<td>node_sockstat_TCP_alloc</td>
<td>state   alloc中的TCP sockets数</td>
<td>#   HELP node_sockstat_TCP_alloc Number of TCP sockets in state alloc.</td>
</tr>
<tr>
<td>node_sockstat_TCP_inuse</td>
<td>state   inuse中的TCP sockets数</td>
<td>#   HELP node_sockstat_TCP_inuse Number of TCP sockets in state inuse.</td>
</tr>
<tr>
<td>node_sockstat_TCP_mem</td>
<td>state   mem中的TCP sockets数</td>
<td>#   HELP node_sockstat_TCP_mem Number of TCP sockets in state mem.</td>
</tr>
<tr>
<td>node_sockstat_TCP_mem_bytes</td>
<td>state   mem_bytes中的TCP sockets数</td>
<td>#   HELP node_sockstat_TCP_mem_bytes Number of TCP sockets in state mem_bytes.</td>
</tr>
<tr>
<td>node_sockstat_TCP_orphan</td>
<td>state   orphan中的TCP sockets数</td>
<td>#   HELP node_sockstat_TCP_orphan Number of TCP sockets in state orphan.</td>
</tr>
<tr>
<td>node_sockstat_TCP_tw</td>
<td>state   tw中的TCP sockets数</td>
<td>#   HELP node_sockstat_TCP_tw Number of TCP sockets in state tw.</td>
</tr>
<tr>
<td>node_sockstat_UDPLITE_inuse</td>
<td>state   inuse中的UDPLITE UDP sockets数</td>
<td>#   HELP node_sockstat_UDPLITE_inuse Number of UDPLITE sockets in state inuse.</td>
</tr>
<tr>
<td>node_sockstat_UDP_inuse</td>
<td>state   inuse中的UDP sockets数</td>
<td>#   HELP node_sockstat_UDP_inuse Number of UDP sockets in state inuse.</td>
</tr>
<tr>
<td>node_sockstat_UDP_mem</td>
<td>state   mem中的UDP sockets数</td>
<td>#   HELP node_sockstat_UDP_mem Number of UDP sockets in state mem.</td>
</tr>
<tr>
<td>node_sockstat_UDP_mem_bytes</td>
<td>state   mem_bytes中的UDP sockets数</td>
<td>#   HELP node_sockstat_UDP_mem_bytes Number of UDP sockets in state mem_bytes.</td>
</tr>
<tr>
<td>node_sockstat_sockets_used</td>
<td>state   used中的sockets sockets数</td>
<td>#   HELP node_sockstat_sockets_used Number of sockets sockets in state used.</td>
</tr>
<tr>
<td>node_textfile_scrape_error</td>
<td>如果打开或读取文件时出错时为1，否则为0</td>
<td>#   HELP node_textfile_scrape_error 1 if there was an error opening or reading a   file, 0 otherwise</td>
</tr>
<tr>
<td>node_time_seconds</td>
<td>以纪元（1970年）开始的系统时间</td>
<td>#   HELP node_time_seconds System time in seconds since epoch (1970).</td>
</tr>
<tr>
<td>node_timex_estimated_error_seconds</td>
<td>估计误差（秒）</td>
<td>#   HELP node_timex_estimated_error_seconds Estimated error in seconds.</td>
</tr>
<tr>
<td>node_timex_frequency_adjustment_ratio</td>
<td>本地时钟频率调整</td>
<td>#   HELP node_timex_frequency_adjustment_ratio Local clock frequency adjustment.</td>
</tr>
<tr>
<td>node_timex_loop_time_constant</td>
<td>锁相回路时间常数</td>
<td>#   HELP node_timex_loop_time_constant Phase-locked loop time constant.</td>
</tr>
<tr>
<td>node_timex_maxerror_seconds</td>
<td>最大误差（秒）</td>
<td>#   HELP node_timex_maxerror_seconds Maximum error in seconds.</td>
</tr>
<tr>
<td>node_timex_offset_seconds</td>
<td>本地系统和参考时钟之间的时间偏移</td>
<td>#   HELP node_timex_offset_seconds Time offset in between local system and   reference clock.</td>
</tr>
<tr>
<td>node_timex_pps_calibration_total</td>
<td>每秒脉冲校准间隔计数</td>
<td>#   HELP node_timex_pps_calibration_total Pulse per second count of calibration   intervals.</td>
</tr>
<tr>
<td>node_timex_pps_error_total</td>
<td>每秒脉冲校准错误计数</td>
<td>#   HELP node_timex_pps_error_total Pulse per second count of calibration errors.</td>
</tr>
<tr>
<td>node_timex_pps_frequency_hertz</td>
<td>脉冲每秒频率</td>
<td>#   HELP node_timex_pps_frequency_hertz Pulse per second frequency.</td>
</tr>
<tr>
<td>node_timex_pps_jitter_seconds</td>
<td>脉冲每秒抖动</td>
<td>#   HELP node_timex_pps_jitter_seconds Pulse per second jitter.</td>
</tr>
<tr>
<td>node_timex_pps_jitter_total</td>
<td>每秒脉冲数超出抖动限制的事件数</td>
<td>#   HELP node_timex_pps_jitter_total Pulse per second count of jitter limit   exceeded events.</td>
</tr>
<tr>
<td>node_timex_pps_shift_seconds</td>
<td>每秒脉冲数超出稳定极限的事件数</td>
<td>#   HELP node_timex_pps_shift_seconds Pulse per second interval duration.</td>
</tr>
<tr>
<td>node_timex_pps_stability_exceeded_total</td>
<td>每秒脉冲数超出稳定极限事件</td>
<td>#   HELP node_timex_pps_stability_exceeded_total Pulse per second count of   stability limit exceeded events.</td>
</tr>
<tr>
<td>node_timex_pps_stability_hertz</td>
<td>脉冲每秒稳定性，最近频率变化的平均值</td>
<td>#   HELP node_timex_pps_stability_hertz Pulse per second stability, average of   recent frequency changes.</td>
</tr>
<tr>
<td>node_timex_status</td>
<td>status   array bits的值</td>
<td>#   HELP node_timex_status Value of the status array bits.</td>
</tr>
<tr>
<td>node_timex_sync_status</td>
<td>时钟与可靠服务器同步(1   = yes, 0 = no)</td>
<td>#   HELP node_timex_sync_status Is clock synchronized to a reliable server (1 =   yes, 0 = no).</td>
</tr>
<tr>
<td>node_timex_tai_offset_seconds</td>
<td>国际原子时间（TAI）偏移量</td>
<td>#   HELP node_timex_tai_offset_seconds International Atomic Time (TAI) offset.</td>
</tr>
<tr>
<td>node_timex_tick_seconds</td>
<td>时钟周期之间的秒数</td>
<td>#   HELP node_timex_tick_seconds Seconds between clock ticks.</td>
</tr>
<tr>
<td>node_uname_info</td>
<td>由uname系统调用提供的标记系统信息</td>
<td>#   HELP node_uname_info Labeled system information as provided by the uname   system call.</td>
</tr>
<tr>
<td>node_vmstat_pgfault</td>
<td>/proc/vmstat信息字段pgfault</td>
<td>#   HELP node_vmstat_pgfault /proc/vmstat information field pgfault.</td>
</tr>
<tr>
<td>node_vmstat_pgmajfault</td>
<td>/proc/vmstat信息字段pgmajfault</td>
<td>#   HELP node_vmstat_pgmajfault /proc/vmstat information field pgmajfault.</td>
</tr>
<tr>
<td>node_vmstat_pgpgin</td>
<td>/proc/vmstat信息字段pgpgin</td>
<td>#   HELP node_vmstat_pgpgin /proc/vmstat information field pgpgin.</td>
</tr>
<tr>
<td>node_vmstat_pgpgout</td>
<td>/proc/vmstat信息字段pgpgout</td>
<td>#   HELP node_vmstat_pgpgout /proc/vmstat information field pgpgout.</td>
</tr>
<tr>
<td>node_vmstat_pswpin</td>
<td>/proc/vmstat信息字段pswpin</td>
<td>#   HELP node_vmstat_pswpin /proc/vmstat information field pswpin.</td>
</tr>
<tr>
<td>node_vmstat_pswpout</td>
<td>/proc/vmstat信息字段pswpout</td>
<td>#   HELP node_vmstat_pswpout /proc/vmstat information field pswpout.</td>
</tr>
<tr>
<td>node_xfs_allocation_btree_compares_total</td>
<td>文件系统的分配B-tree比较数</td>
<td>#   HELP node_xfs_allocation_btree_compares_total Number of allocation B-tree   compares for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_allocation_btree_lookups_total</td>
<td>文件系统的分配B-tree查找数</td>
<td>#   HELP node_xfs_allocation_btree_lookups_total Number of allocation B-tree   lookups for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_allocation_btree_records_deleted_total</td>
<td>为文件系统删除的分配B-tree记录数</td>
<td>#   HELP node_xfs_allocation_btree_records_deleted_total Number of allocation   B-tree records deleted for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_allocation_btree_records_inserted_total</td>
<td>为文件系统插入的分配B-tree记录数</td>
<td>#   HELP node_xfs_allocation_btree_records_inserted_total Number of allocation   B-tree records inserted for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_block_map_btree_compares_total</td>
<td>对于文件系统block映射B-tree比较的数量</td>
<td>#   HELP node_xfs_block_map_btree_compares_total Number of block map B-tree   compares for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_block_map_btree_lookups_total</td>
<td>对于文件系统block映射B-tree查找的数量</td>
<td>#   HELP node_xfs_block_map_btree_lookups_total Number of block map B-tree   lookups for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_block_map_btree_records_deleted_total</td>
<td>文件系统删除block映射B-tree记录的数量</td>
<td>#   HELP node_xfs_block_map_btree_records_deleted_total Number of block map   B-tree records deleted for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_block_map_btree_records_inserted_total</td>
<td>文件系统插入block映射B-tree记录的数量</td>
<td>#   HELP node_xfs_block_map_btree_records_inserted_total Number of block map   B-tree records inserted for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_block_mapping_extent_list_compares_total</td>
<td>文件系统的extent列表比较数</td>
<td>#   HELP node_xfs_block_mapping_extent_list_compares_total Number of extent list   compares for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_block_mapping_extent_list_deletions_total</td>
<td>文件系统的extent列表删除数</td>
<td>#   HELP node_xfs_block_mapping_extent_list_deletions_total Number of extent list   deletions for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_block_mapping_extent_list_insertions_total</td>
<td>文件系统的extent列表插入数</td>
<td>#   HELP node_xfs_block_mapping_extent_list_insertions_total Number of extent   list insertions for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_block_mapping_extent_list_lookups_total</td>
<td>文件系统的extent列表查找次数</td>
<td>#   HELP node_xfs_block_mapping_extent_list_lookups_total Number of extent list   lookups for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_block_mapping_reads_total</td>
<td>文件系统读取操作的block映射数</td>
<td>#   HELP node_xfs_block_mapping_reads_total Number of block map for read   operations for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_block_mapping_unmaps_total</td>
<td>文件系统的block取消映射（删除）的数量</td>
<td>#   HELP node_xfs_block_mapping_unmaps_total Number of block unmaps (deletes) for   a filesystem.</td>
</tr>
<tr>
<td>node_xfs_block_mapping_writes_total</td>
<td>文件系统写操作的block映射数</td>
<td>#   HELP node_xfs_block_mapping_writes_total Number of block map for write   operations for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_extent_allocation_blocks_allocated_total</td>
<td>文件系统分配的block数</td>
<td>#   HELP node_xfs_extent_allocation_blocks_allocated_total Number of blocks   allocated for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_extent_allocation_blocks_freed_total</td>
<td>文件系统释放的block数</td>
<td>#   HELP node_xfs_extent_allocation_blocks_freed_total Number of blocks freed for   a filesystem.</td>
</tr>
<tr>
<td>node_xfs_extent_allocation_extents_allocated_total</td>
<td>为文件系统分配的extent数      在电脑文件系统中，一个 Extent (在中国大陆某些文献中翻译为“区块”[1])，是指一段连续的存储空间。一般来说，一个文件的物理大小一定是一个   extent 容量的整数倍。当一个进程创建一个文件的时候，文件系统管理程序会将整个 extent 分配给这个文件。当再次向该文件写入数据时   (有可能是在其他写入操作之后)，数据会从上次写入的数据末尾处追加数据。这样可以减少甚至消除文件碎片。      参考：<a target="_blank" rel="noopener" href="http://www.wikiwand.com/zh-sg/Extent_(%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1)">http://www.wikiwand.com/zh-sg/Extent_(%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1)</a></td>
<td>#   HELP node_xfs_extent_allocation_extents_allocated_total Number of extents   allocated for a filesystem.</td>
</tr>
<tr>
<td>node_xfs_extent_allocation_extents_freed_total</td>
<td>文件系统释放的extent数</td>
<td>#   HELP node_xfs_extent_allocation_extents_freed_total Number of extents freed   for a filesystem.</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/05/24/prometheus-ceph-exporter-%E7%9B%91%E6%8E%A7%E9%A1%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/24/prometheus-ceph-exporter-%E7%9B%91%E6%8E%A7%E9%A1%B9/" class="post-title-link" itemprop="url">prometheus ceph_exporter 监控项</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-05-24 22:15:29" itemprop="dateCreated datePublished" datetime="2019-05-24T22:15:29+08:00">2019-05-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-22 16:16:36" itemprop="dateModified" datetime="2020-03-22T16:16:36+08:00">2020-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>截止2019-05-24 ceph_exporter监控项整理</p>
<table>
<thead>
<tr>
<th>Metrics</th>
<th>Chinese   explanation</th>
<th>English   explanation</th>
</tr>
</thead>
<tbody><tr>
<td>ceph_active_pgs</td>
<td>处于active状态的PG数</td>
<td># HELP   ceph_active_pgs No. of active PGs in the cluster</td>
</tr>
<tr>
<td>ceph_backfill_wait_pgs</td>
<td>处于backfill_wait状态的PG数</td>
<td># HELP   ceph_backfill_wait_pgs No. of PGs in the cluster with backfill_wait state</td>
</tr>
<tr>
<td>ceph_backfilling_pgs</td>
<td>处于backfilling状态的PG数</td>
<td># HELP   ceph_backfilling_pgs No. of backfilling PGs in the cluster</td>
</tr>
<tr>
<td>ceph_cache_evict_io_bytes</td>
<td>每秒从cache   pool（缓存池）中evicted（逐出）的字节数</td>
<td># HELP   ceph_cache_evict_io_bytes Rate of bytes being evicted from the cache pool per   second</td>
</tr>
<tr>
<td>ceph_cache_flush_io_bytes</td>
<td>每秒从cache   pool（缓存池）中flushed（刷新）的字节数</td>
<td># HELP   ceph_cache_flush_io_bytes Rate of bytes being flushed from the cache pool per   second</td>
</tr>
<tr>
<td>ceph_cache_promote_io_ops</td>
<td>每秒cache promote操作的总数</td>
<td># HELP   ceph_cache_promote_io_ops Total cache promote operations measured per second</td>
</tr>
<tr>
<td>ceph_client_io_ops</td>
<td>客户端每秒操作总数</td>
<td># HELP   ceph_client_io_ops Total client ops on the cluster measured per second</td>
</tr>
<tr>
<td>ceph_client_io_read_bytes</td>
<td>客户端每秒read字节数</td>
<td># HELP   ceph_client_io_read_bytes Rate of bytes being read by all clients per second</td>
</tr>
<tr>
<td>ceph_client_io_read_ops</td>
<td>客户端每秒read总I/O操作数</td>
<td># HELP   ceph_client_io_read_ops Total client read I/O ops on the cluster measured per   second</td>
</tr>
<tr>
<td>ceph_client_io_write_bytes</td>
<td>客户端每秒write字节数</td>
<td># HELP   ceph_client_io_write_bytes Rate of bytes being written by all clients per   second</td>
</tr>
<tr>
<td>ceph_client_io_write_ops</td>
<td>客户端每秒write总I/O操作数</td>
<td># HELP   ceph_client_io_write_ops Total client write I/O ops on the cluster measured   per second</td>
</tr>
<tr>
<td>ceph_cluster_available_bytes</td>
<td>群集中的可用空间</td>
<td># HELP   ceph_cluster_available_bytes Available space within the cluster</td>
</tr>
<tr>
<td>ceph_cluster_capacity_bytes</td>
<td>群集的总容量</td>
<td># HELP   ceph_cluster_capacity_bytes Total capacity of the cluster</td>
</tr>
<tr>
<td>ceph_cluster_objects</td>
<td>集群中的rados object数</td>
<td># HELP   ceph_cluster_objects No. of rados objects within the cluster</td>
</tr>
<tr>
<td>ceph_cluster_used_bytes</td>
<td>集群已使用的容量</td>
<td># HELP   ceph_cluster_used_bytes Capacity of the cluster currently in use</td>
</tr>
<tr>
<td>ceph_deep_scrubbing_pgs</td>
<td>deep scrubbing状态的PG数量</td>
<td># HELP   ceph_deep_scrubbing_pgs No. of deep scrubbing PGs in the cluster</td>
</tr>
<tr>
<td>ceph_degraded_objects</td>
<td>所有PG中degraded   objects的数量，包括副本</td>
<td># HELP   ceph_degraded_objects No. of degraded objects across all PGs, includes   replicas</td>
</tr>
<tr>
<td>ceph_degraded_pgs</td>
<td>处于degraded状态的PG数</td>
<td># HELP   ceph_degraded_pgs No. of PGs in a degraded state</td>
</tr>
<tr>
<td>ceph_down_pgs</td>
<td>处于down状态的PG数</td>
<td># HELP ceph_down_pgs   No. of PGs in the cluster in down state</td>
</tr>
<tr>
<td>ceph_forced_backfill_pgs</td>
<td>处于forced_backfill状态的PG数</td>
<td># HELP   ceph_forced_backfill_pgs No. of PGs in the cluster with forced_backfill state</td>
</tr>
<tr>
<td>ceph_forced_recovery_pgs</td>
<td>处于forced_recovery状态的PG数</td>
<td># HELP   ceph_forced_recovery_pgs No. of PGs in the cluster with forced_recovery state</td>
</tr>
<tr>
<td>ceph_health_status</td>
<td>群集的health状态，只能在3种状态之间变化(err:2,   warn:1, ok:0)</td>
<td># HELP   ceph_health_status Health status of Cluster, can vary only between 3 states   (err:2, warn:1, ok:0)</td>
</tr>
<tr>
<td>ceph_misplaced_objects</td>
<td>所有PG中misplaced   object的数量，包括副本</td>
<td># HELP   ceph_misplaced_objects No. of misplaced objects across all PGs, includes   replicas</td>
</tr>
<tr>
<td>ceph_monitor_quorum_count</td>
<td>monitor quorum的总数</td>
<td># HELP   ceph_monitor_quorum_count The total size of the monitor quorum</td>
</tr>
<tr>
<td>ceph_osd_avail_bytes</td>
<td>OSD可用存储字节数</td>
<td># HELP   ceph_osd_avail_bytes OSD Available Storage in Bytes</td>
</tr>
<tr>
<td>ceph_osd_average_utilization</td>
<td>OSD平均利用率</td>
<td># HELP   ceph_osd_average_utilization OSD Average Utilization</td>
</tr>
<tr>
<td>ceph_osd_bytes</td>
<td>OSD总字节数</td>
<td># HELP ceph_osd_bytes   OSD Total Bytes</td>
</tr>
<tr>
<td>ceph_osd_crush_weight</td>
<td>OSD Crush Weight</td>
<td># HELP   ceph_osd_crush_weight OSD Crush Weight</td>
</tr>
<tr>
<td>ceph_osd_depth</td>
<td>OSD 深度</td>
<td># HELP ceph_osd_depth   OSD Depth</td>
</tr>
<tr>
<td>ceph_osd_in</td>
<td>OSD In状态</td>
<td># HELP ceph_osd_in   OSD In Status</td>
</tr>
<tr>
<td>ceph_osd_perf_apply_latency_seconds</td>
<td>OSD Perf Apply延迟</td>
<td># HELP   ceph_osd_perf_apply_latency_seconds OSD Perf Apply Latency</td>
</tr>
<tr>
<td>ceph_osd_perf_commit_latency_seconds</td>
<td>OSD Perf Commit延迟</td>
<td># HELP   ceph_osd_perf_commit_latency_seconds OSD Perf Commit Latency</td>
</tr>
<tr>
<td>ceph_osd_pgs</td>
<td>OSD Placement Group计数</td>
<td># HELP ceph_osd_pgs   OSD Placement Group Count</td>
</tr>
<tr>
<td>ceph_osd_reweight</td>
<td>OSD Reweight</td>
<td># HELP   ceph_osd_reweight OSD Reweight</td>
</tr>
<tr>
<td>ceph_osd_total_avail_bytes</td>
<td>OSD可用存储总字节数</td>
<td># HELP   ceph_osd_total_avail_bytes OSD Total Available Storage Bytes</td>
</tr>
<tr>
<td>ceph_osd_total_bytes</td>
<td>OSD总存储字节数</td>
<td># HELP   ceph_osd_total_bytes OSD Total Storage Bytes</td>
</tr>
<tr>
<td>ceph_osd_total_used_bytes</td>
<td>OSD已使用总的存储字节数</td>
<td># HELP   ceph_osd_total_used_bytes OSD Total Used Storage Bytes</td>
</tr>
<tr>
<td>ceph_osd_up</td>
<td>OSD Up状态</td>
<td># HELP ceph_osd_up   OSD Up Status</td>
</tr>
<tr>
<td>ceph_osd_used_bytes</td>
<td>OSD已使用的存储空间字节</td>
<td># HELP   ceph_osd_used_bytes OSD Used Storage in Bytes</td>
</tr>
<tr>
<td>ceph_osd_utilization</td>
<td>OSD利用率</td>
<td># HELP   ceph_osd_utilization OSD Utilization</td>
</tr>
<tr>
<td>ceph_osd_variance</td>
<td>OSD方差</td>
<td># HELP   ceph_osd_variance OSD Variance</td>
</tr>
<tr>
<td>ceph_osdmap_flag_full</td>
<td>群集标记为已满，无法提供写入服务</td>
<td># HELP   ceph_osdmap_flag_full The cluster is flagged as full and cannot service   writes</td>
</tr>
<tr>
<td>ceph_osdmap_flag_nobackfill</td>
<td>OSD不会被backfill</td>
<td># HELP   ceph_osdmap_flag_nobackfill OSDs will not be backfilled</td>
</tr>
<tr>
<td>ceph_osdmap_flag_nodeep_scrub</td>
<td>禁用Deep scrubbing</td>
<td># HELP   ceph_osdmap_flag_nodeep_scrub Deep scrubbing is disabled</td>
</tr>
<tr>
<td>ceph_osdmap_flag_nodown</td>
<td>忽略OSD失败报告，OSD不会被标记为down</td>
<td># HELP   ceph_osdmap_flag_nodown OSD failure reports are ignored, OSDs will not be   marked as down</td>
</tr>
<tr>
<td>ceph_osdmap_flag_noin</td>
<td>不会自动标记out的OSD</td>
<td># HELP   ceph_osdmap_flag_noin OSDs that are out will not be automatically marked in</td>
</tr>
<tr>
<td>ceph_osdmap_flag_noout</td>
<td>在配置的间隔后，OSD不会自动标记out</td>
<td># HELP   ceph_osdmap_flag_noout OSDs will not be automatically marked out after the   configured interval</td>
</tr>
<tr>
<td>ceph_osdmap_flag_norebalance</td>
<td>数据rebalancing暂停</td>
<td># HELP   ceph_osdmap_flag_norebalance Data rebalancing is suspended</td>
</tr>
<tr>
<td>ceph_osdmap_flag_norecover</td>
<td>Recovery暂停</td>
<td># HELP   ceph_osdmap_flag_norecover Recovery is suspended</td>
</tr>
<tr>
<td>ceph_osdmap_flag_noscrub</td>
<td>禁用Scrubbing</td>
<td># HELP   ceph_osdmap_flag_noscrub Scrubbing is disabled</td>
</tr>
<tr>
<td>ceph_osdmap_flag_notieragent</td>
<td>Cache tiering   activity已暂停</td>
<td># HELP   ceph_osdmap_flag_notieragent Cache tiering activity is suspended</td>
</tr>
<tr>
<td>ceph_osdmap_flag_noup</td>
<td>不允许OSD start</td>
<td># HELP   ceph_osdmap_flag_noup OSDs are not allowed to start</td>
</tr>
<tr>
<td>ceph_osdmap_flag_pauserd</td>
<td>Reads暂停</td>
<td># HELP   ceph_osdmap_flag_pauserd Reads are paused</td>
</tr>
<tr>
<td>ceph_osdmap_flag_pausewr</td>
<td>Writes暂停</td>
<td># HELP   ceph_osdmap_flag_pausewr Writes are paused</td>
</tr>
<tr>
<td>ceph_osds</td>
<td>群集中总OSD数量</td>
<td># HELP ceph_osds   Count of total OSDs in the cluster</td>
</tr>
<tr>
<td>ceph_osds_down</td>
<td>处于DOWN状态的OSD数量</td>
<td># HELP ceph_osds_down   Count of OSDs that are in DOWN state</td>
</tr>
<tr>
<td>ceph_osds_in</td>
<td>处于IN状态并可用于处理请求的OSD数量</td>
<td># HELP ceph_osds_in   Count of OSDs that are in IN state and available to serve requests</td>
</tr>
<tr>
<td>ceph_osds_up</td>
<td>处于UP状态的OSD数量</td>
<td># HELP ceph_osds_up   Count of OSDs that are in UP state</td>
</tr>
<tr>
<td>ceph_peering_pgs</td>
<td>群集中peering状态的PG数量</td>
<td># HELP   ceph_peering_pgs No. of peering PGs in the cluster</td>
</tr>
<tr>
<td>ceph_pgs_remapped</td>
<td>remapped并引起cluster-wide（群集范围）移动的PG数量</td>
<td># HELP   ceph_pgs_remapped No. of PGs that are remapped and incurring cluster-wide   movement</td>
</tr>
<tr>
<td>ceph_recovering_pgs</td>
<td>群集中recovering状态的PG数量</td>
<td># HELP   ceph_recovering_pgs No. of recovering PGs in the cluster</td>
</tr>
<tr>
<td>ceph_recovery_io_bytes</td>
<td>每秒recovery的字节数</td>
<td># HELP   ceph_recovery_io_bytes Rate of bytes being recovered in cluster per second</td>
</tr>
<tr>
<td>ceph_recovery_io_keys</td>
<td>每秒恢复的keys数率</td>
<td># HELP   ceph_recovery_io_keys Rate of keys being recovered in cluster per second</td>
</tr>
<tr>
<td>ceph_recovery_io_objects</td>
<td>每秒恢复的object的速率</td>
<td># HELP   ceph_recovery_io_objects Rate of objects being recovered in cluster per   second</td>
</tr>
<tr>
<td>ceph_recovery_wait_pgs</td>
<td>处于recovery_wait状态的PG数</td>
<td># HELP   ceph_recovery_wait_pgs No. of PGs in the cluster with recovery_wait state</td>
</tr>
<tr>
<td>ceph_scrubbing_pgs</td>
<td>处于scrubbing状态的PG数</td>
<td># HELP   ceph_scrubbing_pgs No. of scrubbing PGs in the cluster</td>
</tr>
<tr>
<td>ceph_slow_requests</td>
<td>慢速请求数</td>
<td># HELP   ceph_slow_requests No. of slow requests</td>
</tr>
<tr>
<td>ceph_stale_pgs</td>
<td>处于stale状态的PG数</td>
<td># HELP ceph_stale_pgs   No. of stale PGs in the cluster</td>
</tr>
<tr>
<td>ceph_stuck_degraded_pgs</td>
<td>处于degraded状态的PG数</td>
<td># HELP   ceph_stuck_degraded_pgs No. of PGs stuck in a degraded state</td>
</tr>
<tr>
<td>ceph_stuck_requests</td>
<td>stuck（卡住）的请求数</td>
<td># HELP   ceph_stuck_requests No. of stuck requests</td>
</tr>
<tr>
<td>ceph_stuck_stale_pgs</td>
<td>处于stale状态的PG数</td>
<td># HELP   ceph_stuck_stale_pgs No. of stuck stale PGs in the cluster</td>
</tr>
<tr>
<td>ceph_stuck_unclean_pgs</td>
<td>处于unclean状态的PG数</td>
<td># HELP   ceph_stuck_unclean_pgs No. of PGs stuck in an unclean state</td>
</tr>
<tr>
<td>ceph_stuck_undersized_pgs</td>
<td>处于undersized状态的PG数</td>
<td># HELP   ceph_stuck_undersized_pgs No. of stuck undersized PGs in the cluster</td>
</tr>
<tr>
<td>ceph_total_pgs</td>
<td>集群中总的PG数</td>
<td># HELP ceph_total_pgs   Total no. of PGs in the cluster</td>
</tr>
<tr>
<td>ceph_unclean_pgs</td>
<td>处于unclean状态的PG数</td>
<td># HELP   ceph_unclean_pgs No. of PGs in an unclean state</td>
</tr>
<tr>
<td>ceph_undersized_pgs</td>
<td>处于undersized状态的PG数</td>
<td># HELP   ceph_undersized_pgs No. of undersized PGs in the cluster</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/04/08/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/08/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" class="post-title-link" itemprop="url">LVM逻辑卷基本概念</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-04-08 10:06:35" itemprop="dateCreated datePublished" datetime="2019-04-08T10:06:35+08:00">2019-04-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-22 16:16:36" itemprop="dateModified" datetime="2020-03-22T16:16:36+08:00">2020-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>LinuxCast视频教程笔记</p>
<h1 id="传统磁盘管理的问题"><a href="#传统磁盘管理的问题" class="headerlink" title="传统磁盘管理的问题"></a>传统磁盘管理的问题</h1><p>当分区大小不够用时无法扩展其大小，只能通过添加硬盘、创建新的分区来扩展空间，但是新添加进来的硬盘是作为独立文件系统存在的，原有的文件系统并未得到扩充，上层应用很多时候只能访问一个文件系统。只能让现有磁盘下线，换上新的磁盘之后，再将原始数据导入。</p>
<h1 id="LVM"><a href="#LVM" class="headerlink" title="LVM"></a>LVM</h1><p>LVM（Logical volume Manager）逻辑卷管理通过将底层物理硬盘抽象封装起来，以逻辑卷的形式表现给上层系统，逻辑卷的大小可以动态调整，而且不会丢失现有数据。新加入的硬盘也不会改变现有上层的逻辑卷。</p>
<p>作为一种动态磁盘管理机制，逻辑卷技术大大提高了磁盘管理的灵活性。</p>
<p><img src="https://raw.githubusercontent.com/lnsyyj/lnsyyj.github.io/hexo/Blog/source/_posts/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/LVM-1.png"></p>
<p>上图黄色为：VG    橙色为：LV</p>
<p>（1）首先把物理硬盘格式化（存储里面叫条带化）为物理卷（PV），格式化为物理卷的过程实际上是把硬盘空间化成一个一个的PE（PE是逻辑卷空间管理的最基本单位，默认4M）</p>
<p>（2）第二步我们要创建一个VG，VG的作用是用来装PE的，就像一个空间池。我们可以把一个或者多个PV加到VG当中。加入多少个PV，我们的VG容量就是这些PV大小之和。（当创建VG以后，在/dev目录下会多出一个目录）</p>
<p>（3）最后创建LV（每个LV的空间可能来自不同的物理硬盘）</p>
<p><img src="https://github.com/lnsyyj/lnsyyj.github.io/blob/hexo/Blog/source/_posts/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/LVM-2.png?raw=true"></p>
<h1 id="创建LVM"><a href="#创建LVM" class="headerlink" title="创建LVM"></a>创建LVM</h1><p><img src="https://raw.githubusercontent.com/lnsyyj/lnsyyj.github.io/hexo/Blog/source/_posts/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/LVM-3.png"></p>
<p><img src="https://raw.githubusercontent.com/lnsyyj/lnsyyj.github.io/hexo/Blog/source/_posts/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/LVM-4.png"></p>
<p><img src="https://raw.githubusercontent.com/lnsyyj/lnsyyj.github.io/hexo/Blog/source/_posts/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/LVM-5.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">[root@teuthology ~]# lsblk</span><br><span class="line">NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">vda    253:0    0  200G  0 disk </span><br><span class="line">├─vda1 253:1    0    1G  0 part &#x2F;boot</span><br><span class="line">├─vda2 253:2    0    4G  0 part [SWAP]</span><br><span class="line">└─vda3 253:3    0  195G  0 part &#x2F;</span><br><span class="line">vdb    253:16   0  100G  0 disk </span><br><span class="line">vdc    253:32   0  100G  0 disk</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# pvcreate &#x2F;dev&#x2F;vdb &#x2F;dev&#x2F;vdc</span><br><span class="line">  Physical volume &quot;&#x2F;dev&#x2F;vdb&quot; successfully created.</span><br><span class="line">  Physical volume &quot;&#x2F;dev&#x2F;vdc&quot; successfully created.</span><br><span class="line">[root@teuthology ~]# pvs</span><br><span class="line">  PV         VG Fmt  Attr PSize   PFree  </span><br><span class="line">  &#x2F;dev&#x2F;vdb      lvm2 ---  100.00g 100.00g</span><br><span class="line">  &#x2F;dev&#x2F;vdc      lvm2 ---  100.00g 100.00g</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# vgcreate linuxcast &#x2F;dev&#x2F;vdb &#x2F;dev&#x2F;vdc </span><br><span class="line">  Volume group &quot;linuxcast&quot; successfully created</span><br><span class="line">[root@teuthology ~]# vgs</span><br><span class="line">  VG        #PV #LV #SN Attr   VSize   VFree  </span><br><span class="line">  linuxcast   2   0   0 wz--n- 199.99g 199.99g</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# lvcreate -n mylv -L 2G linuxcast</span><br><span class="line">  Logical volume &quot;mylv&quot; created.</span><br><span class="line">[root@teuthology ~]# lvs</span><br><span class="line">  LV   VG        Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  mylv linuxcast -wi-a----- 2.00g</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# lvcreate -n mynewlv -L 2G linuxcast</span><br><span class="line">  Logical volume &quot;mynewlv&quot; created.</span><br><span class="line">[root@teuthology ~]# ll &#x2F;dev&#x2F;linuxcast&#x2F;</span><br><span class="line">total 0</span><br><span class="line">lrwxrwxrwx 1 root root 7 Apr  8 14:59 mylv -&gt; ..&#x2F;dm-0</span><br><span class="line">lrwxrwxrwx 1 root root 7 Apr  8 15:03 mynewlv -&gt; ..&#x2F;dm-1</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# mkfs.ext4 &#x2F;dev&#x2F;linuxcast&#x2F;mylv</span><br><span class="line">[root@teuthology ~]# mount &#x2F;dev&#x2F;linuxcast&#x2F;mylv &#x2F;mnt&#x2F;</span><br><span class="line">[root@teuthology ~]# df -Th</span><br><span class="line">Filesystem                 Type      Size  Used Avail Use% Mounted on</span><br><span class="line">&#x2F;dev&#x2F;vda3                  xfs       195G  2.6G  193G   2% &#x2F;</span><br><span class="line">devtmpfs                   devtmpfs  3.9G     0  3.9G   0% &#x2F;dev</span><br><span class="line">tmpfs                      tmpfs     3.9G     0  3.9G   0% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs                      tmpfs     3.9G  8.6M  3.9G   1% &#x2F;run</span><br><span class="line">tmpfs                      tmpfs     3.9G     0  3.9G   0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">&#x2F;dev&#x2F;vda1                  xfs      1014M  172M  843M  17% &#x2F;boot</span><br><span class="line">tmpfs                      tmpfs     783M     0  783M   0% &#x2F;run&#x2F;user&#x2F;0</span><br><span class="line">&#x2F;dev&#x2F;mapper&#x2F;linuxcast-mylv ext4      2.0G  6.0M  1.8G   1% &#x2F;mnt</span><br><span class="line"></span><br><span class="line">#删除LVM</span><br><span class="line">[root@teuthology ~]# umount  &#x2F;mnt&#x2F;</span><br><span class="line">[root@teuthology ~]# lvremove &#x2F;dev&#x2F;linuxcast&#x2F;mylv </span><br><span class="line">Do you really want to remove active logical volume linuxcast&#x2F;mylv? [y&#x2F;n]: y</span><br><span class="line">  Logical volume &quot;mylv&quot; successfully removed</span><br><span class="line">[root@teuthology ~]# lvremove &#x2F;dev&#x2F;linuxcast&#x2F;mynewlv </span><br><span class="line">Do you really want to remove active logical volume linuxcast&#x2F;mynewlv? [y&#x2F;n]: y</span><br><span class="line">  Logical volume &quot;mynewlv&quot; successfully removed</span><br><span class="line">[root@teuthology ~]# lvs</span><br><span class="line">[root@teuthology ~]# vgremove linuxcast</span><br><span class="line">  Volume group &quot;linuxcast&quot; successfully removed</span><br><span class="line">[root@teuthology ~]# vgs</span><br><span class="line">[root@teuthology ~]# pvremove &#x2F;dev&#x2F;vdb </span><br><span class="line">  Labels on physical volume &quot;&#x2F;dev&#x2F;vdb&quot; successfully wiped.</span><br><span class="line">[root@teuthology ~]# pvremove &#x2F;dev&#x2F;vdc</span><br><span class="line">  Labels on physical volume &quot;&#x2F;dev&#x2F;vdc&quot; successfully wiped.</span><br></pre></td></tr></table></figure>
<h1 id="LVM逻辑卷的拉伸与缩小"><a href="#LVM逻辑卷的拉伸与缩小" class="headerlink" title="LVM逻辑卷的拉伸与缩小"></a>LVM逻辑卷的拉伸与缩小</h1><p><img src="https://raw.githubusercontent.com/lnsyyj/lnsyyj.github.io/hexo/Blog/source/_posts/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/LVM-6.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">[root@teuthology ~]# lsblk</span><br><span class="line">NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">vda    253:0    0  200G  0 disk </span><br><span class="line">├─vda1 253:1    0    1G  0 part &#x2F;boot</span><br><span class="line">├─vda2 253:2    0    4G  0 part [SWAP]</span><br><span class="line">└─vda3 253:3    0  195G  0 part &#x2F;</span><br><span class="line">vdb    253:16   0  100G  0 disk </span><br><span class="line">vdc    253:32   0  100G  0 disk </span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# pvcreate &#x2F;dev&#x2F;vdb &#x2F;dev&#x2F;vdc</span><br><span class="line">  Physical volume &quot;&#x2F;dev&#x2F;vdb&quot; successfully created.</span><br><span class="line">  Physical volume &quot;&#x2F;dev&#x2F;vdc&quot; successfully created.</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# pvs</span><br><span class="line">  PV         VG Fmt  Attr PSize   PFree  </span><br><span class="line">  &#x2F;dev&#x2F;vdb      lvm2 ---  100.00g 100.00g</span><br><span class="line">  &#x2F;dev&#x2F;vdc      lvm2 ---  100.00g 100.00g</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# vgcreate linuxcast &#x2F;dev&#x2F;vdb &#x2F;dev&#x2F;vdc</span><br><span class="line">  Volume group &quot;linuxcast&quot; successfully created</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# lvcreate -n mylv -L 2G linuxcast</span><br><span class="line">WARNING: ext4 signature detected on &#x2F;dev&#x2F;linuxcast&#x2F;mylv at offset 1080. Wipe it? [y&#x2F;n]: y</span><br><span class="line">  Wiping ext4 signature on &#x2F;dev&#x2F;linuxcast&#x2F;mylv.</span><br><span class="line">  Logical volume &quot;mylv&quot; created.</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# mkfs.ext4 &#x2F;dev&#x2F;linuxcast&#x2F;mylv</span><br><span class="line">mke2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">文件系统标签&#x3D;</span><br><span class="line">OS type: Linux</span><br><span class="line">块大小&#x3D;4096 (log&#x3D;2)</span><br><span class="line">分块大小&#x3D;4096 (log&#x3D;2)</span><br><span class="line">Stride&#x3D;0 blocks, Stripe width&#x3D;0 blocks</span><br><span class="line">131072 inodes, 524288 blocks</span><br><span class="line">26214 blocks (5.00%) reserved for the super user</span><br><span class="line">第一个数据块&#x3D;0</span><br><span class="line">Maximum filesystem blocks&#x3D;536870912</span><br><span class="line">16 block groups</span><br><span class="line">32768 blocks per group, 32768 fragments per group</span><br><span class="line">8192 inodes per group</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">	32768, 98304, 163840, 229376, 294912</span><br><span class="line"></span><br><span class="line">Allocating group tables: 完成                            </span><br><span class="line">正在写入inode表: 完成                            </span><br><span class="line">Creating journal (16384 blocks): 完成</span><br><span class="line">Writing superblocks and filesystem accounting information: 完成 </span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# mount &#x2F;dev&#x2F;linuxcast&#x2F;mylv &#x2F;mnt&#x2F;</span><br><span class="line">[root@teuthology ~]# df -TH</span><br><span class="line">文件系统                   类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">&#x2F;dev&#x2F;vda3                  xfs       210G  2.8G  207G    2% &#x2F;</span><br><span class="line">devtmpfs                   devtmpfs  4.1G     0  4.1G    0% &#x2F;dev</span><br><span class="line">tmpfs                      tmpfs     4.2G     0  4.2G    0% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs                      tmpfs     4.2G  9.0M  4.1G    1% &#x2F;run</span><br><span class="line">tmpfs                      tmpfs     4.2G     0  4.2G    0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">&#x2F;dev&#x2F;vda1                  xfs       1.1G  180M  884M   17% &#x2F;boot</span><br><span class="line">tmpfs                      tmpfs     821M     0  821M    0% &#x2F;run&#x2F;user&#x2F;0</span><br><span class="line">&#x2F;dev&#x2F;mapper&#x2F;linuxcast-mylv ext4      2.1G  6.3M  2.0G    1% &#x2F;mnt</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# vgs</span><br><span class="line">  VG        #PV #LV #SN Attr   VSize   VFree  </span><br><span class="line">  linuxcast   2   1   0 wz--n- 199.99g 197.99g</span><br><span class="line">[root@teuthology ~]# lvs</span><br><span class="line">  LV   VG        Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  mylv linuxcast -wi-ao---- 2.00g</span><br><span class="line">[root@teuthology ~]# lvextend -L +1G &#x2F;dev&#x2F;linuxcast&#x2F;mylv </span><br><span class="line">  Size of logical volume linuxcast&#x2F;mylv changed from 2.00 GiB (512 extents) to 3.00 GiB (768 extents).</span><br><span class="line">  Logical volume linuxcast&#x2F;mylv successfully resized.</span><br><span class="line">[root@teuthology ~]# lvs</span><br><span class="line">  LV   VG        Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  mylv linuxcast -wi-ao---- 3.00g</span><br><span class="line">[root@teuthology ~]# df -Th</span><br><span class="line">文件系统                   类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">&#x2F;dev&#x2F;vda3                  xfs       195G  2.6G  193G    2% &#x2F;</span><br><span class="line">devtmpfs                   devtmpfs  3.9G     0  3.9G    0% &#x2F;dev</span><br><span class="line">tmpfs                      tmpfs     3.9G     0  3.9G    0% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs                      tmpfs     3.9G  8.6M  3.9G    1% &#x2F;run</span><br><span class="line">tmpfs                      tmpfs     3.9G     0  3.9G    0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">&#x2F;dev&#x2F;vda1                  xfs      1014M  172M  843M   17% &#x2F;boot</span><br><span class="line">tmpfs                      tmpfs     783M     0  783M    0% &#x2F;run&#x2F;user&#x2F;0</span><br><span class="line">&#x2F;dev&#x2F;mapper&#x2F;linuxcast-mylv ext4      2.0G  6.0M  1.8G    1% &#x2F;mnt</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# resize2fs &#x2F;dev&#x2F;linuxcast&#x2F;mylv </span><br><span class="line">resize2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Filesystem at &#x2F;dev&#x2F;linuxcast&#x2F;mylv is mounted on &#x2F;mnt; on-line resizing required</span><br><span class="line">old_desc_blocks &#x3D; 1, new_desc_blocks &#x3D; 1</span><br><span class="line">The filesystem on &#x2F;dev&#x2F;linuxcast&#x2F;mylv is now 786432 blocks long.</span><br><span class="line">[root@teuthology ~]# df -Th</span><br><span class="line">文件系统                   类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">&#x2F;dev&#x2F;vda3                  xfs       195G  2.6G  193G    2% &#x2F;</span><br><span class="line">devtmpfs                   devtmpfs  3.9G     0  3.9G    0% &#x2F;dev</span><br><span class="line">tmpfs                      tmpfs     3.9G     0  3.9G    0% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs                      tmpfs     3.9G  8.6M  3.9G    1% &#x2F;run</span><br><span class="line">tmpfs                      tmpfs     3.9G     0  3.9G    0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">&#x2F;dev&#x2F;vda1                  xfs      1014M  172M  843M   17% &#x2F;boot</span><br><span class="line">tmpfs                      tmpfs     783M     0  783M    0% &#x2F;run&#x2F;user&#x2F;0</span><br><span class="line">&#x2F;dev&#x2F;mapper&#x2F;linuxcast-mylv ext4      2.9G  6.0M  2.8G    1% &#x2F;mnt</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/lnsyyj/lnsyyj.github.io/hexo/Blog/source/_posts/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/LVM-7.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@teuthology ~]# lsblk</span><br><span class="line">NAME             MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">vda              253:0    0  200G  0 disk </span><br><span class="line">├─vda1           253:1    0    1G  0 part &#x2F;boot</span><br><span class="line">├─vda2           253:2    0    4G  0 part [SWAP]</span><br><span class="line">└─vda3           253:3    0  195G  0 part &#x2F;</span><br><span class="line">vdb              253:16   0  100G  0 disk </span><br><span class="line">└─linuxcast-mylv 252:0    0    3G  0 lvm  &#x2F;mnt</span><br><span class="line">vdc              253:32   0  100G  0 disk </span><br><span class="line">vdd              253:48   0  100G  0 disk </span><br><span class="line">[root@teuthology ~]# pvcreate &#x2F;dev&#x2F;vd</span><br><span class="line">vda   vda1  vda2  vda3  vdb   vdc   vdd   </span><br><span class="line">[root@teuthology ~]# pvcreate &#x2F;dev&#x2F;vdd </span><br><span class="line">  Physical volume &quot;&#x2F;dev&#x2F;vdd&quot; successfully created.</span><br><span class="line">[root@teuthology ~]# vgs</span><br><span class="line">  VG        #PV #LV #SN Attr   VSize   VFree  </span><br><span class="line">  linuxcast   2   1   0 wz--n- 199.99g 196.99g</span><br><span class="line">[root@teuthology ~]# vgextend linuxcast &#x2F;dev&#x2F;vdd </span><br><span class="line">  Volume group &quot;linuxcast&quot; successfully extended</span><br><span class="line">[root@teuthology ~]# vgs</span><br><span class="line">  VG        #PV #LV #SN Attr   VSize    VFree   </span><br><span class="line">  linuxcast   3   1   0 wz--n- &lt;299.99g &lt;296.99g</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/lnsyyj/lnsyyj.github.io/hexo/Blog/source/_posts/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/LVM-8.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@teuthology ~]# umount &#x2F;mnt&#x2F;</span><br><span class="line">[root@teuthology ~]# df -Th</span><br><span class="line">文件系统       类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">&#x2F;dev&#x2F;vda3      xfs       195G  2.6G  193G    2% &#x2F;</span><br><span class="line">devtmpfs       devtmpfs  3.9G     0  3.9G    0% &#x2F;dev</span><br><span class="line">tmpfs          tmpfs     3.9G     0  3.9G    0% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs          tmpfs     3.9G  8.6M  3.9G    1% &#x2F;run</span><br><span class="line">tmpfs          tmpfs     3.9G     0  3.9G    0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">&#x2F;dev&#x2F;vda1      xfs      1014M  172M  843M   17% &#x2F;boot</span><br><span class="line">tmpfs          tmpfs     783M     0  783M    0% &#x2F;run&#x2F;user&#x2F;0</span><br><span class="line">[root@teuthology ~]# lvs</span><br><span class="line">  LV   VG        Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  mylv linuxcast -wi-a----- 3.00g                                                    </span><br><span class="line">[root@teuthology ~]# resize2fs &#x2F;dev&#x2F;linuxcast&#x2F;mylv 2G</span><br><span class="line">resize2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">请先运行 &#39;e2fsck -f &#x2F;dev&#x2F;linuxcast&#x2F;mylv&#39;.</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# e2fsck -f &#x2F;dev&#x2F;linuxcast&#x2F;mylv</span><br><span class="line">e2fsck 1.42.9 (28-Dec-2013)</span><br><span class="line">第一步: 检查inode,块,和大小</span><br><span class="line">第二步: 检查目录结构</span><br><span class="line">第3步: 检查目录连接性</span><br><span class="line">Pass 4: Checking reference counts</span><br><span class="line">第5步: 检查簇概要信息</span><br><span class="line">&#x2F;dev&#x2F;linuxcast&#x2F;mylv: 11&#x2F;196608 files (0.0% non-contiguous), 30268&#x2F;786432 blocks</span><br><span class="line">[root@teuthology ~]# resize2fs &#x2F;dev&#x2F;linuxcast&#x2F;mylv 2G</span><br><span class="line">resize2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Resizing the filesystem on &#x2F;dev&#x2F;linuxcast&#x2F;mylv to 524288 (4k) blocks.</span><br><span class="line">The filesystem on &#x2F;dev&#x2F;linuxcast&#x2F;mylv is now 524288 blocks long.</span><br><span class="line"></span><br><span class="line">[root@teuthology ~]# lvreduce -L -1G &#x2F;dev&#x2F;linuxcast&#x2F;mylv </span><br><span class="line">  WARNING: Reducing active logical volume to 2.00 GiB.</span><br><span class="line">  THIS MAY DESTROY YOUR DATA (filesystem etc.)</span><br><span class="line">Do you really want to reduce linuxcast&#x2F;mylv? [y&#x2F;n]: y</span><br><span class="line">  Size of logical volume linuxcast&#x2F;mylv changed from 3.00 GiB (768 extents) to 2.00 GiB (512 extents).</span><br><span class="line">  Logical volume linuxcast&#x2F;mylv successfully resized.</span><br><span class="line">[root@teuthology ~]# lvs</span><br><span class="line">  LV   VG        Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  mylv linuxcast -wi-a----- 2.00g</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/lnsyyj/lnsyyj.github.io/hexo/Blog/source/_posts/LVM%E9%80%BB%E8%BE%91%E5%8D%B7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/LVM-9.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@teuthology ~]# vgs</span><br><span class="line">  VG        #PV #LV #SN Attr   VSize    VFree   </span><br><span class="line">  linuxcast   3   1   0 wz--n- &lt;299.99g &lt;296.99g</span><br><span class="line">[root@teuthology ~]# vgreduce linuxcast &#x2F;dev&#x2F;vdd </span><br><span class="line">  Removed &quot;&#x2F;dev&#x2F;vdd&quot; from volume group &quot;linuxcast&quot;</span><br><span class="line">[root@teuthology ~]# vgs</span><br><span class="line">  VG        #PV #LV #SN Attr   VSize   VFree  </span><br><span class="line">  linuxcast   2   1   0 wz--n- 199.99g 197.99g</span><br><span class="line">[root@teuthology ~]# pvs</span><br><span class="line">  PV         VG        Fmt  Attr PSize    PFree   </span><br><span class="line">  &#x2F;dev&#x2F;vdb   linuxcast lvm2 a--  &lt;100.00g  &lt;98.00g</span><br><span class="line">  &#x2F;dev&#x2F;vdc   linuxcast lvm2 a--  &lt;100.00g &lt;100.00g</span><br><span class="line">  &#x2F;dev&#x2F;vdd             lvm2 ---   100.00g  100.00g</span><br><span class="line">[root@teuthology ~]# pvremove &#x2F;dev&#x2F;vdd </span><br><span class="line">  Labels on physical volume &quot;&#x2F;dev&#x2F;vdd&quot; successfully wiped.</span><br><span class="line">[root@teuthology ~]# pvs</span><br><span class="line">  PV         VG        Fmt  Attr PSize    PFree   </span><br><span class="line">  &#x2F;dev&#x2F;vdb   linuxcast lvm2 a--  &lt;100.00g  &lt;98.00g</span><br><span class="line">  &#x2F;dev&#x2F;vdc   linuxcast lvm2 a--  &lt;100.00g &lt;100.00g</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/04/01/LTP%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/01/LTP%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">LTP使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-04-01 22:13:25" itemprop="dateCreated datePublished" datetime="2019-04-01T22:13:25+08:00">2019-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-22 16:16:36" itemprop="dateModified" datetime="2020-03-22T16:16:36+08:00">2020-03-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ltp-install]# .&#x2F;runltp -h</span><br><span class="line"></span><br><span class="line">    usage: runltp [ -a EMAIL_TO ] [ -c NUM_PROCS ] [ -C FAILCMDFILE ] [ -T TCONFCMDFILE ]</span><br><span class="line">    [ -d TMPDIR ] [ -D NUM_PROCS,NUM_FILES,NUM_BYTES,CLEAN_FLAG ] -e [ -f CMDFILES(,...) ]</span><br><span class="line">    [ -g HTMLFILE] [ -i NUM_PROCS ] [ -l LOGFILE ] [ -m NUM_PROCS,CHUNKS,BYTES,HANGUP_FLAG ]</span><br><span class="line">    -N -n [ -o OUTPUTFILE ] -p -q -Q [ -r LTPROOT ] [ -s PATTERN ] [ -t DURATION ]</span><br><span class="line">    -v [ -w CMDFILEADDR ] [ -x INSTANCES ] [ -b DEVICE ] [-B LTP_DEV_FS_TYPE]</span><br><span class="line">[ -F LOOPS,PERCENTAGE ] [ -z BIG_DEVICE ] [-Z  LTP_BIG_DEV_FS_TYPE]</span><br><span class="line">					</span><br><span class="line">					# 将所有报告通过EMAIL方式发送到指定E-mail Address</span><br><span class="line">    -a EMAIL_TO     EMAIL all your Reports to this E-mail Address</span><br><span class="line">    				# 在后台额外增加CPU负载的情况下运行LTP</span><br><span class="line">    -c NUM_PROCS    Run LTP under additional background CPU load</span><br><span class="line">                    [NUM_PROCS &#x3D; no. of processes creating the CPU Load by spinning over sqrt()</span><br><span class="line">                                 (Defaults to 1 when value)]</span><br><span class="line">    -C FAILCMDFILE  Command file with all failed test cases.</span><br><span class="line">    -T TCONFCMDFILE Command file with all test cases that are not fully tested.</span><br><span class="line">    -d TMPDIR       Directory where temporary files will be created.</span><br><span class="line">    -D NUM_PROCS,NUM_FILES,NUM_BYTES,CLEAN_FLAG</span><br><span class="line">                    Run LTP under additional background Load on Secondary Storage (Seperate by comma)</span><br><span class="line">                    [NUM_PROCS   &#x3D; no. of processes creating Storage Load by spinning over write()]</span><br><span class="line">                    [NUM_FILES   &#x3D; Write() to these many files (Defaults to 1 when value 0 or undefined)]</span><br><span class="line">                    [NUM_BYTES   &#x3D; write these many bytes (defaults to 1GB, when value 0 or undefined)]</span><br><span class="line">                    [CLEAN_FLAG  &#x3D; unlink file to which random data written, when value 1]</span><br><span class="line">    -e              Prints the date of the current LTP release</span><br><span class="line">    -f CMDFILES     Execute user defined list of testcases (separate with &#39;,&#39;)</span><br><span class="line">-F LOOPS,PERCENTAGE Induce PERCENTAGE Fault in the Kernel Subsystems, and, run each test for LOOPS loop</span><br><span class="line">    -g HTMLFILE     Create an additional HTML output format</span><br><span class="line">    -h              Help. Prints all available options.</span><br><span class="line">    -i NUM_PROCS    Run LTP under additional background Load on IO Bus</span><br><span class="line">                    [NUM_PROCS   &#x3D; no. of processes creating IO Bus Load by spinning over sync()]</span><br><span class="line">    -K DMESG_LOG_DIR</span><br><span class="line">Log Kernel messages generated for each test cases inside this directory</span><br><span class="line">    -l LOGFILE      Log results of test in a logfile.</span><br><span class="line">    -m NUM_PROCS,CHUNKS,BYTES,HANGUP_FLAG</span><br><span class="line">                    Run LTP under additional background Load on Main memory (Seperate by comma)</span><br><span class="line">                    [NUM_PROCS   &#x3D; no. of processes creating main Memory Load by spinning over malloc()]</span><br><span class="line">                    [CHUNKS      &#x3D; malloc these many chunks (default is 1 when value 0 or undefined)]</span><br><span class="line">                    [BYTES       &#x3D; malloc CHUNKS of BYTES bytes (default is 256MB when value 0 or undefined) ]</span><br><span class="line">                    [HANGUP_FLAG &#x3D; hang in a sleep loop after memory allocated, when value 1]</span><br><span class="line">-M CHECK_TYPE</span><br><span class="line">[CHECK_TYPE&#x3D;1 &#x3D;&gt; Full Memory Leak Check tracing children as well]</span><br><span class="line">[CHECK_TYPE&#x3D;2 &#x3D;&gt; Thread Concurrency Check tracing children as well]</span><br><span class="line">[CHECK_TYPE&#x3D;3 &#x3D;&gt; Full Memory Leak &amp; Thread Concurrency Check tracing children as well]</span><br><span class="line">					# 运行所有网络测试</span><br><span class="line">    -N              Run all the networking tests.</span><br><span class="line">    				# 在后台额外增加网络流量的方式运行LTP</span><br><span class="line">    -n              Run LTP with network traffic in background.</span><br><span class="line">    				# 将测试输出重定向到文件</span><br><span class="line">    -o OUTPUTFILE   Redirect test output to a file.</span><br><span class="line">    				# 友好可读格式日志文件。</span><br><span class="line">    -p              Human readable format logfiles.</span><br><span class="line">    				# 打印较少的详细输出到屏幕。 这意味着不在kernel log中记录测试的开始信息</span><br><span class="line">    -q              Print less verbose output to screen. This implies not logging start of the test in kernel log.</span><br><span class="line">                    # 不在kernel log中记录测试开始信息</span><br><span class="line">    -Q              Don&#39;t log start of test in kernel log.</span><br><span class="line">    				# 安装testsuite的绝对路径</span><br><span class="line">    -r LTPROOT      Fully qualified path where testsuite is installed.</span><br><span class="line">    				# 随机化测试顺序</span><br><span class="line">    -R              Randomize test order.</span><br><span class="line">    				# 只运行与模式匹配的测试用例</span><br><span class="line">    -s PATTERN      Only run test cases which match PATTERN.</span><br><span class="line">    				# 跳过SKIPFILE中指定的测试</span><br><span class="line">    -S SKIPFILE     Skip tests specified in SKIPFILE</span><br><span class="line">    				# 在给定的时间内持续执行testsuite。例如：</span><br><span class="line">    -t DURATION     Execute the testsuite for given duration. Examples:</span><br><span class="line">                      -t 60s &#x3D; 60 seconds</span><br><span class="line">                      -t 45m &#x3D; 45 minutes</span><br><span class="line">                      -t 24h &#x3D; 24 hours</span><br><span class="line">                      -t 2d  &#x3D; 2 days</span><br><span class="line">                    # 执行testsuite迭代次数</span><br><span class="line">    -I ITERATIONS   Execute the testsuite ITERATIONS times.</span><br><span class="line">    				# 使用wget获取用户的测试用例列表</span><br><span class="line">    -w CMDFILEADDR  Uses wget to get the user&#39;s list of testcases.</span><br><span class="line">    				# 运行此testsuite的多个实例</span><br><span class="line">    -x INSTANCES    Run multiple instances of this testsuite.</span><br><span class="line">    				# 有些测试需要一个unmounted的块设备才能正常运行</span><br><span class="line">    -b DEVICE       Some tests require an unmounted block device to run correctly.</span><br><span class="line">                       # 测试块设备的文件系统</span><br><span class="line">    -B LTP_DEV_FS_TYPE The file system of test block devices.</span><br><span class="line">    				# 某些测试需要大型未安装的块设备才能正常运行</span><br><span class="line">    -z BIG_DEVICE   Some tests require a big unmounted block device to run correctly.</span><br><span class="line">                    		# 大设备的文件系统</span><br><span class="line">    -Z  LTP_BIG_DEV_FS_TYPE The file system of the big device</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    example: runltp -c 2 -i 2 -m 2,4,10240,1 -D 2,10,10240,1 -p -q  -l &#x2F;tmp&#x2F;result-log.3140 -o &#x2F;tmp&#x2F;result-output.3140 -C &#x2F;tmp&#x2F;result-failed.3140 -d &#x2F;root&#x2F;ltp-install</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">110</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
